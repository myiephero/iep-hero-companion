import{j as e}from"./chunk-DsWtD-um.js";import{r as s,L as i}from"./chunk--CdJ9rTh.js";import{u as a}from"./chunk-DiCKXT8z.js";import{a as t,u as n,D as d,C as r,h as c,B as o,d as l,e as m,f as p,m as u}from"../assets/index-BuUqvl4a.js";import{B as h}from"./chunk-DjC-ACAS.js";import{S as x,a as g,b as f,c as j,d as v}from"./chunk-CqIUznKi.js";import{an as N,ac as w,p as y,y as b,ad as S,aN as A,x as k,A as C,b as P,at as E,U as B,B as _}from"./chunk-CIO6T0Sb.js";const z=()=>{const[z,R]=s.useState(""),[T,L]=s.useState("all"),[D,G]=s.useState([]),{toast:I}=t(),{user:q,profile:O}=n(),U="advocate"===(q?.role||O?.role||"parent"),{data:V}=a({queryKey:["/api/students"],queryFn:async()=>(await u("GET","/api/students")).json()}),$=[{id:"sensory",title:"Sensory Support",icon:e.jsx(E,{className:"h-5 w-5"}),description:"Accommodations for sensory processing and regulation",items:[{id:"noise-canceling",title:"Noise-Canceling Headphones",description:"Provide noise-canceling headphones for noisy environments",recommended:!0},{id:"sensory-breaks",title:"Sensory Breaks",description:"Regular breaks to sensory room or quiet space every 30 minutes",recommended:!0},{id:"fidget-tools",title:"Fidget Tools",description:"Allow use of fidget toys or stress balls during instruction",recommended:!1},{id:"weighted-blanket",title:"Weighted Lap Pad",description:"Use of weighted lap pad for self-regulation during work time",recommended:!1},{id:"lighting",title:"Lighting Adjustments",description:"Adjusted lighting or seating away from fluorescent lights",recommended:!1}]},{id:"communication",title:"Communication",icon:e.jsx(B,{className:"h-5 w-5"}),description:"Communication and language support strategies",items:[{id:"visual-schedules",title:"Visual Schedules",description:"Visual schedules and social stories for transitions",recommended:!0},{id:"communication-device",title:"AAC Device",description:"Access to AAC device or picture cards for communication",recommended:!1},{id:"peer-support",title:"Peer Support",description:"Structured peer interaction opportunities",recommended:!0},{id:"social-scripts",title:"Social Scripts",description:"Pre-written social scripts for common situations",recommended:!1}]},{id:"academic",title:"Academic Support",icon:e.jsx(_,{className:"h-5 w-5"}),description:"Learning and academic processing accommodations",items:[{id:"extended-time",title:"Extended Time",description:"Extended time for assignments and tests (1.5x)",recommended:!0},{id:"chunking",title:"Task Chunking",description:"Breaking assignments into smaller, manageable chunks",recommended:!0},{id:"visual-supports",title:"Visual Supports",description:"Visual supports and graphic organizers for learning",recommended:!0},{id:"repetition",title:"Repeated Instructions",description:"Repeated instructions and clarification as needed",recommended:!1}]},{id:"social",title:"Social Support",icon:e.jsx(B,{className:"h-5 w-5"}),description:"Social skills and peer interaction supports",items:[{id:"social-skills-group",title:"Social Skills Group",description:"Participation in structured social skills group sessions",recommended:!0},{id:"peer-buddy",title:"Peer Buddy System",description:"Assignment of peer buddy for social support",recommended:!0},{id:"lunch-club",title:"Lunch Club",description:"Structured lunch club for social interaction practice",recommended:!1}]},{id:"behavioral",title:"Behavioral Support",icon:e.jsx(b,{className:"h-5 w-5"}),description:"Behavior management and self-regulation strategies",items:[{id:"behavior-plan",title:"Positive Behavior Support Plan",description:"Individualized positive behavior support plan",recommended:!0},{id:"break-cards",title:"Break Request Cards",description:"Visual cards to request breaks when overwhelmed",recommended:!0},{id:"calm-down-space",title:"Calm Down Space",description:"Access to designated calm down space when needed",recommended:!1}]},{id:"environmental",title:"Environmental",icon:e.jsx(N,{className:"h-5 w-5"}),description:"Physical environment and classroom modifications",items:[{id:"preferential-seating",title:"Preferential Seating",description:"Seating near teacher, away from distractions",recommended:!0},{id:"quiet-space",title:"Access to Quiet Space",description:"Access to quiet space for work completion",recommended:!0},{id:"reduced-stimuli",title:"Reduced Environmental Stimuli",description:"Minimize visual and auditory distractions in workspace",recommended:!1}]}],F="all"===T?$:$.filter(e=>e.id===T);return e.jsx(d,{children:e.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Autism Accommodation Builder"}),e.jsx("p",{className:"text-muted-foreground",children:"Create personalized accommodations and supports for students with autism"})]})]})}),e.jsx(r,{className:"bg-gradient-card border-0",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Student Selection"}),U&&e.jsx(h,{variant:"secondary",className:"px-3 py-1",children:"Advocate Mode"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:U?"Choose a client's student to create accommodations for, or create general templates.":"Choose a student to create accommodations for, or leave blank for general accommodations."}),e.jsxs(x,{value:z,onValueChange:R,children:[e.jsx(g,{className:"max-w-md",children:e.jsx(f,{placeholder:U?"Select a client's student...":"Select a student..."})}),e.jsxs(j,{children:[e.jsx(v,{value:"",children:U?"General Template":"General Accommodations"}),V?.map(s=>e.jsxs(v,{value:s.id,children:[s.full_name," - ",s.grade_level?`Grade ${s.grade_level}`:"No Grade"]},s.id))]})]}),U&&z&&e.jsx("div",{className:"mt-2 p-3 bg-primary/10 rounded-lg",children:e.jsx("p",{className:"text-xs text-primary font-medium",children:"ðŸ’¡ Advocate Tip: Creating accommodations for a specific client will be shared with the parent for review."})})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(o,{variant:"all"===T?"default":"outline",onClick:()=>L("all"),className:"rounded-full",children:"All"}),$.map(s=>e.jsxs(o,{variant:T===s.id?"default":"outline",onClick:()=>L(s.id),className:"rounded-full",children:[e.jsx("span",{className:"mr-2",children:s.icon}),s.title]},s.id))]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(o,{onClick:()=>{$.forEach(e=>{e.items.forEach(e=>{D.includes(e.id)||G(s=>[...s,e.id])})}),I({title:"All Accommodations Added",description:"All available accommodations have been added to your list"})},variant:"secondary",size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add All Accommodations"]}),e.jsxs(h,{variant:"secondary",className:"px-3 py-1",children:[D.length," accommodations added"]})]}),e.jsx("div",{className:"grid gap-6",children:F.map(s=>e.jsxs(r,{className:"bg-gradient-card border-0",children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[s.icon,s.title]}),e.jsx(p,{children:s.description})]}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Suggested Accommodations"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.items.map(s=>e.jsxs("div",{className:"flex flex-col gap-3 p-4 rounded-lg bg-surface border border-border hover:border-primary/20 transition-colors",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-medium text-sm",children:s.title}),s.recommended&&e.jsx(h,{variant:"secondary",className:"text-xs",children:"Recommended"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]}),e.jsx(o,{onClick:()=>(e=>{if(!D.includes(e)){G(s=>[...s,e]);const s=$.flatMap(e=>e.items).find(s=>s.id===e);I({title:"Accommodation Added",description:`${s?.title} has been added to your list`})}})(s.id),disabled:D.includes(s.id),size:"sm",variant:D.includes(s.id)?"secondary":"default",className:"w-full","data-testid":`button-add-accommodation-${s.id}`,children:D.includes(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Added"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add This Accommodation"]})})]},s.id))})]})})]},s.id))}),D.length>0&&e.jsxs(r,{className:"bg-gradient-hero text-white border-0",children:[e.jsxs(l,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Added Accommodations (",D.length,")"]}),e.jsx(p,{className:"text-white/80",children:"Review and manage your selected accommodations"})]}),e.jsx(c,{children:e.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:D.map(s=>{const i=$.flatMap(e=>e.items).find(e=>e.id===s);return i?e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/10 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:i.title})]}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{return e=s,void G(s=>s.filter(s=>s!==e));var e},className:"text-white/60 hover:text-white hover:bg-white/10",children:"Remove"})]},s):null})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(o,{variant:"default",size:"lg",className:"w-full",disabled:0===D.length,onClick:async()=>{if(0!==D.length)try{const e=D.map(e=>{const s=$.flatMap(e=>e.items).find(s=>s.id===e);return s?{id:s.id,title:s.title,description:s.description,category:$.find(s=>s.items.some(s=>s.id===e))?.title||"Unknown"}:null}).filter(Boolean),s=z&&V?.find(e=>e.id===z)?.full_name||"General",i=`Autism Accommodations - ${s}`,a={studentId:z||null,studentName:s,accommodations:e,createdDate:(new Date).toISOString(),categories:$.map(e=>({id:e.id,title:e.title,description:e.description}))};await u("POST","/api/documents",{title:i,description:`Autism accommodation plan created on ${(new Date).toLocaleDateString()}`,file_name:`${i}.json`,file_path:`vault/accommodations/${Date.now()}-autism-accommodations`,file_type:"application/json",file_size:new Blob([JSON.stringify(a,null,2)]).size,category:"Accommodation Plan",tags:["autism","accommodations","plan"],content:JSON.stringify(a,null,2),student_id:z||null});I({title:"Saved to Vault",description:"Accommodation plan has been saved to your document vault"})}catch(e){console.error("Error saving to vault:",e),I({title:"Error",description:"Failed to save to vault. Please try again.",variant:"destructive"})}else I({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"})},children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Save to Vault"]}),e.jsxs(o,{variant:"hero",size:"lg",className:"w-full",disabled:0===D.length,onClick:async()=>{if(0!==D.length)try{D.map(e=>{const s=$.flatMap(e=>e.items).find(s=>s.id===e);return s?{id:s.id,title:s.title,description:s.description,category:$.find(s=>s.items.some(s=>s.id===e))?.title||"Unknown"}:null}).filter(Boolean);const e=await u("POST","/api/autism_accommodations/generate-iep",{accommodation_ids:D,student_id:z||null,format:"formal"}),s=await e.json(),i=new Blob([s.iep_language],{type:"text/plain"}),a=URL.createObjectURL(i),t=document.createElement("a");t.href=a,t.download=`autism-accommodations-iep-language-${(new Date).toISOString().split("T")[0]}.txt`,t.click(),URL.revokeObjectURL(a),I({title:"IEP Language Generated",description:"IEP language document has been downloaded"})}catch(e){console.error("Error generating IEP language:",e),I({title:"Error",description:"Failed to generate IEP language. Please try again.",variant:"destructive"})}else I({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"})},"data-testid":"button-generate-iep",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Generate IEP Language"]}),e.jsxs(o,{variant:"outline",size:"lg",className:"w-full",disabled:0===D.length,onClick:async()=>{if(0!==D.length)try{const e=await u("POST","/api/autism_accommodations/preview",{accommodation_ids:D,student_id:z||null,template_type:"iep"}),s=await e.json();console.log("Preview content:",s.preview),I({title:"Preview Generated",description:"Accommodation plan preview opened in new window"})}catch(e){console.error("Error generating preview:",e),I({title:"Error",description:"Failed to generate preview. Please try again.",variant:"destructive"})}else I({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"})},"data-testid":"button-preview-document",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Preview Document"]})]}),!U&&e.jsx("div",{className:"flex justify-center",children:e.jsx(o,{asChild:!0,variant:"secondary",size:"lg",className:"min-w-48",children:e.jsxs(i,{to:"/upsell/hero-plan",children:["Get Expert Review",e.jsx(C,{className:"h-4 w-4 ml-2"})]})})}),U&&e.jsx("div",{className:"flex justify-center",children:e.jsx(o,{asChild:!0,variant:"outline",size:"lg",className:"min-w-48",children:e.jsxs(i,{to:"/advocate/dashboard-pro",children:["Back to Client Dashboard",e.jsx(C,{className:"h-4 w-4 ml-2"})]})})})]}),e.jsxs(r,{className:"bg-surface border-0",children:[e.jsx(l,{children:e.jsxs(m,{className:"text-lg flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-primary"}),"Tips for Success"]})}),e.jsxs(c,{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("p",{children:"Start with recommended accommodations - they're based on research and best practices"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("p",{children:"Consider your child's specific sensory needs and learning style"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("p",{children:"Accommodations should be individualized to your child's unique profile"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("p",{children:"Include specific details about implementation (frequency, duration, settings)"})]})]})]}),e.jsx("div",{className:"flex justify-center pt-6 pb-4",children:e.jsx(o,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(i,{to:"/tools/hub",className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 rotate-180"}),"Back to Tools"]})})})]})})})};export{z as default};
