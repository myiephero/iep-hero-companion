import{j as e}from"./chunk-DsWtD-um.js";import{r as t,L as s}from"./chunk--CdJ9rTh.js";import{b as i,u as a,c as r}from"./chunk-DiCKXT8z.js";import{T as o}from"./chunk-CGmihbRH.js";import{a as n,C as c,d,e as l,f as m,h as u,B as p,m as h}from"../assets/index-2BchvXuI.js";import{B as g}from"./chunk-g-Fdx7Wh.js";import{S as x}from"./chunk-C-UEibDY.js";import{U as f,x as j,y as b,ac as v,ae as N,L as y,a1 as k,ad as w,A as S,ao as C}from"./chunk-CIO6T0Sb.js";import"./chunk-BNq8D1fv.js";const P=()=>{const[P,T]=t.useState(""),[A,B]=t.useState([]),[E,F]=t.useState(!1),{toast:q}=n(),G=i(),{data:V}=a({queryKey:["/api/students"],queryFn:async()=>(await h("GET","/api/students")).json()}),L=[{id:"communication-supports",title:"Communication Supports",icon:e.jsx(C,{className:"h-5 w-5"}),description:"Tools and strategies to support communication",items:[{id:"visual-schedules",title:"Visual Schedules & Social Stories",description:"Visual schedules and social stories for transitions and daily routines",recommended:!0,parentTip:"Reduces anxiety about schedule changes and new situations",category:"Visual Support"},{id:"communication-device",title:"AAC Device or Picture Cards",description:"Access to Augmentative and Alternative Communication device or picture cards",recommended:!1,parentTip:"Essential for non-speaking children or those with limited verbal communication",category:"AAC"},{id:"social-scripts",title:"Social Scripts",description:"Pre-written social scripts for common situations and interactions",recommended:!1,parentTip:"Helps with greetings, requesting help, and social interactions",category:"Scripts"},{id:"choice-boards",title:"Choice Boards",description:"Visual choice boards to support decision-making and expressing preferences",recommended:!0,parentTip:"Gives students a way to communicate choices when overwhelmed",category:"Visual Support"},{id:"communication-breaks",title:"Communication Processing Time",description:"Extended wait time for processing and responding to questions",recommended:!0,parentTip:"Allows time to process language and formulate responses",category:"Processing"}]},{id:"social-supports",title:"Social Interaction Supports",icon:e.jsx(f,{className:"h-5 w-5"}),description:"Building meaningful social connections and skills",items:[{id:"social-skills-group",title:"Social Skills Group",description:"Participation in structured social skills group sessions",recommended:!0,parentTip:"Teaches social skills in small, safe groups with explicit instruction",category:"Group Support"},{id:"peer-buddy",title:"Peer Buddy System",description:"Assignment of trained peer buddy for social support and modeling",recommended:!0,parentTip:"Provides natural social modeling and friendship opportunities",category:"Peer Support"},{id:"lunch-club",title:"Structured Lunch Club",description:"Structured lunch club for social interaction practice",recommended:!1,parentTip:"Makes lunchtime less overwhelming and more socially engaging",category:"Group Support"},{id:"peer-support",title:"Structured Peer Interactions",description:"Organized opportunities for peer interaction with support",recommended:!0,parentTip:"Builds social skills in supported, structured settings",category:"Peer Support"},{id:"social-prompting",title:"Social Cuing and Prompting",description:"Discrete prompts and cues to support social interactions",recommended:!1,parentTip:"Helps initiate and maintain appropriate social behaviors",category:"Support"},{id:"friendship-facilitation",title:"Friendship Facilitation",description:"Adult support in developing and maintaining friendships",recommended:!1,parentTip:"Helps navigate complex social relationships",category:"Relationship Support"}]}],M=r({mutationFn:async e=>(await h("POST","/api/autism_accommodations/communication",e)).json(),onSuccess:()=>{F(!0),G.invalidateQueries({queryKey:["/api/students"]}),q({title:"Communication Profile Saved! ðŸŽ‰",description:"Your child's communication accommodations have been saved to their profile"})},onError:e=>{console.error("Error saving communication profile:",e),q({title:"Error saving profile",description:"Please try again",variant:"destructive"})}}),R=V?.find(e=>e.id===P)?.full_name||"your child",H=L.flatMap(e=>e.items).length,Y=Math.round(A.length/H*100);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx(o,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full mb-4",children:e.jsx(f,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Communication Support"}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Build communication and social interaction supports for ",R,". Select accommodations that will enhance communication skills and support meaningful social connections."]})]}),e.jsxs(c,{className:"mb-6",children:[e.jsxs(d,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-green-600"}),"Student Selection"]}),e.jsx(m,{children:"Choose the student to build a communication profile for"})]}),e.jsx(u,{children:e.jsx(x,{selectedStudent:P,onStudentSelect:T,students:V,placeholder:"Select student for communication supports",className:"max-w-md","data-testid":"select-student"})})]}),A.length>0&&e.jsx(c,{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-200 dark:border-green-800",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Communication Profile Progress"}),e.jsxs("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:[A.length," of ",H," accommodations selected"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-3 rounded-full transition-all duration-300",style:{width:`${Y}%`}})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Building a comprehensive communication support profile"})]})}),e.jsx("div",{className:"space-y-8",children:L.map(t=>e.jsxs(c,{className:"shadow-lg",children:[e.jsx(d,{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-b",children:e.jsxs(l,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsx(m,{className:"mt-1",children:t.description})]})]})}),e.jsx(u,{className:"p-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-2",children:t.items.map(t=>{const s=A.includes(t.id);return e.jsx(c,{className:"transition-all duration-200 cursor-pointer hover:shadow-md "+(s?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-200 dark:border-green-800":"hover:bg-muted/30"),onClick:()=>{return s?(e=t.id,B(t=>t.filter(t=>t!==e)),void q({title:"Removed from profile",description:"Accommodation has been removed"})):(e=>{if(!A.includes(e)){B(t=>[...t,e]);const t=L.flatMap(e=>e.items).find(t=>t.id===e);q({title:"Added to Communication Profile! ðŸ’¬",description:`${t?.title} has been added`})}})(t.id);var e},"data-testid":`accommodation-${t.id}`,children:e.jsx(u,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 "+(s?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:s?e.jsx(b,{className:"h-5 w-5"}):e.jsx(v,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.title}),t.recommended&&e.jsxs(g,{className:"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 text-xs",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),"Recommended"]}),e.jsx(g,{variant:"outline",className:"text-xs",children:t.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 italic",children:[e.jsx("strong",{children:"Parent Tip:"})," ",t.parentTip]})]})]})]})})})},t.id)})})})]},t.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center mt-8 pt-6 border-t",children:[e.jsx(p,{asChild:!0,variant:"ghost","data-testid":"button-back-to-autism-hub",children:e.jsxs(s,{to:"/parent/autism-tools",className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Back to Autism Tools"]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{onClick:()=>{P?0!==A.length?M.mutate({student_id:P,accommodations:A}):q({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"}):q({title:"Please select a student",description:"Choose a student to save their communication profile",variant:"destructive"})},disabled:!P||0===A.length||M.isPending,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700","data-testid":"button-save-communication-profile",children:M.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Save Communication Profile"]})}),e.jsx(p,{asChild:!0,variant:"outline","data-testid":"button-continue-to-behavioral",children:e.jsxs(s,{to:"/parent/autism-tools/behavioral",className:"flex items-center gap-2",children:["Continue to Behavioral",e.jsx(S,{className:"h-4 w-4"})]})})]})]}),E&&e.jsx(c,{className:"mt-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-200 dark:border-green-800",children:e.jsxs(u,{className:"p-6 text-center",children:[e.jsx(b,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Communication Profile Saved Successfully!"}),e.jsx("p",{className:"text-muted-foreground",children:"Your child's communication accommodations have been saved. Continue building their complete autism support profile with the Behavioral Strategies tool."})]})})]})]})};export{P as default};
