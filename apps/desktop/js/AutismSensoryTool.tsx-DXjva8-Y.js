import{j as e}from"./chunk-DsWtD-um.js";import{r as t,L as s}from"./chunk--CdJ9rTh.js";import{b as a,u as i,c as r}from"./chunk-DiCKXT8z.js";import{T as n}from"./chunk-CzMW7U9Y.js";import{a as o,C as d,d as l,e as c,f as m,h as u,B as p,m as g}from"../assets/index-4xq_U8Za.js";import{B as h}from"./chunk-dWvI_tCU.js";import{S as x}from"./chunk-DATiskzp.js";import{at as f,x as b,y as j,ac as v,ae as y,L as N,a1 as w,ad as k,A as S,an as P}from"./chunk-CIO6T0Sb.js";import"./chunk-C503eIeV.js";const T=()=>{const[T,C]=t.useState(""),[A,E]=t.useState([]),[B,M]=t.useState(!1),{toast:q}=o(),F=a(),{data:H}=i({queryKey:["/api/students"],queryFn:async()=>(await g("GET","/api/students")).json()}),R=[{id:"sensory-processing",title:"Sensory Processing Support",icon:e.jsx(f,{className:"h-5 w-5"}),description:"Help manage sensory processing challenges",items:[{id:"noise-canceling",title:"Noise-Canceling Headphones",description:"Provide noise-canceling headphones for noisy environments",recommended:!0,parentTip:"Great for cafeteria, assemblies, and classroom noise",category:"Auditory"},{id:"sensory-breaks",title:"Regular Sensory Breaks",description:"Scheduled breaks to sensory room or quiet space every 30 minutes",recommended:!0,parentTip:"Helps prevent sensory overload and meltdowns",category:"Regulation"},{id:"fidget-tools",title:"Fidget Tools & Manipulatives",description:"Allow use of fidget toys or stress balls during instruction",recommended:!1,parentTip:"Can help with focus and self-regulation",category:"Tactile"},{id:"weighted-blanket",title:"Weighted Lap Pad",description:"Use of weighted lap pad for self-regulation during work time",recommended:!1,parentTip:"Provides calming deep pressure input",category:"Proprioceptive"},{id:"lighting",title:"Lighting Adjustments",description:"Adjusted lighting or seating away from fluorescent lights",recommended:!1,parentTip:"Helps children sensitive to harsh lighting",category:"Visual"},{id:"movement-breaks",title:"Movement Breaks",description:"Opportunities for movement and vestibular input throughout the day",recommended:!0,parentTip:"Helps with attention and regulation",category:"Vestibular"}]},{id:"environmental-modifications",title:"Environmental Modifications",icon:e.jsx(P,{className:"h-5 w-5"}),description:"Classroom and workspace modifications",items:[{id:"preferential-seating",title:"Preferential Seating",description:"Seating near teacher, away from distractions or high-traffic areas",recommended:!0,parentTip:"Helps with attention and reduces distractions",category:"Seating"},{id:"quiet-space",title:"Access to Quiet Space",description:"Access to quiet space for work completion and regulation",recommended:!0,parentTip:"Reduces sensory overload during work time",category:"Environment"},{id:"reduced-stimuli",title:"Reduced Environmental Stimuli",description:"Minimize visual and auditory distractions in workspace",recommended:!1,parentTip:"Creates a calm learning environment",category:"Environment"},{id:"flexible-seating",title:"Flexible Seating Options",description:"Access to alternative seating like standing desk, stability ball, or floor cushion",recommended:!1,parentTip:"Allows for movement and position changes",category:"Seating"},{id:"proximity-control",title:"Proximity to Teacher",description:"Seating arrangement that allows for easy teacher support and cueing",recommended:!0,parentTip:"Provides immediate support when needed",category:"Support"}]}],L=r({mutationFn:async e=>(await g("POST","/api/autism_accommodations/sensory",e)).json(),onSuccess:()=>{M(!0),F.invalidateQueries({queryKey:["/api/students"]}),q({title:"Sensory Profile Saved! ðŸŽ‰",description:"Your child's sensory accommodations have been saved to their profile"})},onError:e=>{console.error("Error saving sensory profile:",e),q({title:"Error saving profile",description:"Please try again",variant:"destructive"})}}),Y=H?.find(e=>e.id===T)?.full_name||"your child",O=R.flatMap(e=>e.items).length,$=Math.round(A.length/O*100);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx(n,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-4",children:e.jsx(f,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Sensory Accommodations"}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Build a comprehensive sensory support plan for ",Y,". Select accommodations that will help manage sensory processing challenges and create a supportive learning environment."]})]}),e.jsxs(d,{className:"mb-6",children:[e.jsxs(l,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-blue-600"}),"Student Selection"]}),e.jsx(m,{children:"Choose the student to build a sensory profile for"})]}),e.jsx(u,{children:e.jsx(x,{selectedStudent:T,onStudentSelect:C,students:H,placeholder:"Select student for sensory accommodations",className:"max-w-md","data-testid":"select-student"})})]}),A.length>0&&e.jsx(d,{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-blue-200 dark:border-blue-800",children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Sensory Profile Progress"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:[A.length," of ",O," accommodations selected"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-300",style:{width:`${$}%`}})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Building a comprehensive sensory support profile"})]})}),e.jsx("div",{className:"space-y-8",children:R.map(t=>e.jsxs(d,{className:"shadow-lg",children:[e.jsx(l,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b",children:e.jsxs(c,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsx(m,{className:"mt-1",children:t.description})]})]})}),e.jsx(u,{className:"p-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-2",children:t.items.map(t=>{const s=A.includes(t.id);return e.jsx(d,{className:"transition-all duration-200 cursor-pointer hover:shadow-md "+(s?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-200 dark:border-green-800":"hover:bg-muted/30"),onClick:()=>{return s?(e=t.id,E(t=>t.filter(t=>t!==e)),void q({title:"Removed from profile",description:"Accommodation has been removed"})):(e=>{if(!A.includes(e)){E(t=>[...t,e]);const t=R.flatMap(e=>e.items).find(t=>t.id===e);q({title:"Added to Sensory Profile! âœ¨",description:`${t?.title} has been added`})}})(t.id);var e},"data-testid":`accommodation-${t.id}`,children:e.jsx(u,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 "+(s?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:s?e.jsx(j,{className:"h-5 w-5"}):e.jsx(v,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.title}),t.recommended&&e.jsxs(h,{className:"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 text-xs",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Recommended"]}),e.jsx(h,{variant:"outline",className:"text-xs",children:t.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 italic",children:[e.jsx("strong",{children:"Parent Tip:"})," ",t.parentTip]})]})]})]})})})},t.id)})})})]},t.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center mt-8 pt-6 border-t",children:[e.jsx(p,{asChild:!0,variant:"ghost","data-testid":"button-back-to-autism-hub",children:e.jsxs(s,{to:"/parent/autism-tools",className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),"Back to Autism Tools"]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{onClick:()=>{T?0!==A.length?L.mutate({student_id:T,accommodations:A}):q({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"}):q({title:"Please select a student",description:"Choose a student to save their sensory profile",variant:"destructive"})},disabled:!T||0===A.length||L.isPending,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700","data-testid":"button-save-sensory-profile",children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Save Sensory Profile"]})}),e.jsx(p,{asChild:!0,variant:"outline","data-testid":"button-continue-to-communication",children:e.jsxs(s,{to:"/parent/autism-tools/communication",className:"flex items-center gap-2",children:["Continue to Communication",e.jsx(S,{className:"h-4 w-4"})]})})]})]}),B&&e.jsx(d,{className:"mt-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-200 dark:border-green-800",children:e.jsxs(u,{className:"p-6 text-center",children:[e.jsx(j,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Sensory Profile Saved Successfully!"}),e.jsx("p",{className:"text-muted-foreground",children:"Your child's sensory accommodations have been saved. You can continue building their complete autism support profile with Communication Support and Behavioral Strategies tools."})]})})]})]})};export{T as default};
