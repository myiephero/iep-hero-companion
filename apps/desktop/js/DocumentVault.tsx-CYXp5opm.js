import{j as e}from"./chunk-DsWtD-um.js";import{r as s}from"./chunk--CdJ9rTh.js";import{b as t,u as a,c as r}from"./chunk-DiCKXT8z.js";import{M as l,C as i,P as n}from"./chunk-CLg4OT_Z.js";import{a as d,B as c,c as o,I as m,r as u,t as x,v as h,w as g,x as p,L as j,m as y}from"../assets/index-2BchvXuI.js";import{S as b}from"./chunk-f1NJljzd.js";import{P as f}from"./chunk-Bfk4g-oS.js";import{D as v,a as N,b as w,c as k,d as C,f as S}from"./chunk-gc4Qg77s.js";import{B as A}from"./chunk-g-Fdx7Wh.js";import{S as z,a as D,b as E,c as I,d as _}from"./chunk-BNq8D1fv.js";import{T as F,a as L,b as $,c as P}from"./chunk-DvatESFC.js";import{D as M}from"./chunk-D1kkJdjZ.js";import{a2 as T,aN as B,aU as O,b7 as G,b8 as K,B as U,aC as q,aA as R,aV as V,b9 as J,aJ as W,aW as Q,k as H,as as X,f as Y,X as Z,x as ee,am as se,aa as te,ba as ae}from"./chunk-CIO6T0Sb.js";import"./chunk--P05M-BP.js";import"./chunk-Csgv8Z6q.js";import"./chunk-DoUlYkqf.js";import"./chunk-Cxjqa3wU.js";import"./chunk-CWxgGY0F.js";import"./chunk-D4-oByZb.js";const re=()=>{const{toast:re}=d(),le=t(),[ie,ne]=s.useState(""),[de,ce]=s.useState("all"),[oe,me]=s.useState("all"),[ue,xe]=s.useState("grid"),[he,ge]=s.useState(null),[pe,je]=s.useState(""),[ye,be]=s.useState(null),[fe,ve]=s.useState(""),[Ne,we]=s.useState({document:null,isOpen:!1});s.useState({});const[ke,Ce]=s.useState(new Set),[Se,Ae]=s.useState(!1);!function(e,t){const[a,r]=s.useState(e);s.useEffect(()=>{const s=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(s)}},[e,t])}(ie,300);const{data:ze,isLoading:De,refetch:Ee}=a({queryKey:["/api/documents"],queryFn:async()=>(await y("GET","/api/documents")).json()}),{data:Ie}=a({queryKey:["/api/students"],queryFn:async()=>(await y("GET","/api/students")).json()}),_e=r({mutationFn:async e=>(await y("PUT",`/api/documents/${e.id}`,e)).json(),onSuccess:()=>{le.invalidateQueries({queryKey:["/api/documents"]}),re({title:"Document updated successfully"})},onError:e=>{re({title:"Error updating document",description:e.message,variant:"destructive"})}}),Fe=r({mutationFn:async e=>(await y("DELETE",`/api/documents/${e}`)).json(),onSuccess:()=>{le.invalidateQueries({queryKey:["/api/documents"]}),re({title:"Document deleted successfully"})},onError:e=>{re({title:"Error deleting document",description:e.message,variant:"destructive"})}}),Le=s.useCallback((e,s)=>{ge({id:e,title:s}),je(s)},[]),$e=s.useCallback(()=>{he&&pe.trim()&&(_e.mutate({id:he.id,title:pe.trim()}),ge(null),je(""))},[he,pe,_e]),Pe=e=>{we({document:e,isOpen:!0})},Me=e=>{re({title:"Download started",description:`Downloading ${e.title}`})},Te=ze?.filter(e=>{const s=Ie?.find(s=>s.id===e.student_id),t=s?s.full_name:"",a=e.title.toLowerCase().includes(ie.toLowerCase())||e.file_name.toLowerCase().includes(ie.toLowerCase())||t.toLowerCase().includes(ie.toLowerCase())||e.category?.toLowerCase().includes(ie.toLowerCase())||e.tags?.some(e=>e.toLowerCase().includes(ie.toLowerCase())),r="all"===de||e.file_type?.includes(de)||e.category?.toLowerCase().includes(de.toLowerCase())||"ai review"===de&&"AI Analysis"===e.category,l="all"===oe||"iep"===oe&&("IEP"===e.category||e.tags?.includes("IEP"))||"evaluations"===oe&&("Evaluation"===e.category||e.tags?.includes("Evaluation"))||"ai-analysis"===oe&&"AI Analysis"===e.category||"reports"===oe&&("Report"===e.category||e.tags?.includes("Report"))||"meeting-notes"===oe&&("Meeting Notes"===e.category||e.tags?.includes("Meeting"));return a&&r&&l}),Be=ze?{all:ze.length,iep:ze.filter(e=>"IEP"===e.category||e.tags?.includes("IEP")).length,evaluations:ze.filter(e=>"Evaluation"===e.category||e.tags?.includes("Evaluation")).length,aiAnalysis:ze.filter(e=>"AI Analysis"===e.category).length,reports:ze.filter(e=>"Report"===e.category||e.tags?.includes("Report")).length,meetingNotes:ze.filter(e=>"Meeting Notes"===e.category||e.tags?.includes("Meeting")).length}:{all:0,iep:0,evaluations:0,aiAnalysis:0,reports:0,meetingNotes:0};return e.jsx(l,{children:e.jsxs(b,{children:[e.jsx(f,{title:"Document Vault",subtitle:`${ze?.length||0} documents securely stored`,rightAction:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900 dark:to-emerald-900 text-green-600 dark:text-green-400 px-3 py-1.5 rounded-full text-xs font-medium",children:[e.jsx(T,{className:"h-3 w-3 mr-1 inline"}),"Secure"]}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{Ee(),re({title:"Documents refreshed"})},className:"h-10 w-10 rounded-full p-0","data-testid":"refresh-documents",children:e.jsx(B,{className:"h-4 w-4"})})]})}),e.jsxs(i,{className:"space-y-6 pb-6",children:[e.jsx(n,{variant:"gradient",className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center",children:e.jsx(O,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Upload & Analyze"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add documents for AI-powered analysis"})]})]}),e.jsx(M,{onAnalysisComplete:e=>{console.log("Analysis completed:",e),Ee()}})]})}),e.jsx(n,{variant:"glass",className:"p-0 overflow-hidden",children:e.jsxs(F,{value:oe,onValueChange:me,children:[e.jsx("div",{className:"p-6 pb-0",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Categories"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Organize by document type"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"grid"===ue?"default":"outline",size:"sm",onClick:()=>xe("grid"),className:"h-10 w-10 p-0 rounded-full","data-testid":"view-grid",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(c,{variant:"list"===ue?"default":"outline",size:"sm",onClick:()=>xe("list"),className:"h-10 w-10 p-0 rounded-full","data-testid":"view-list",children:e.jsx(K,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-2 px-2",children:e.jsxs(L,{className:"h-auto bg-transparent p-0 space-x-2",children:[e.jsxs($,{value:"all",className:o("data-[state=active]:bg-blue-500 data-[state=active]:text-white","bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300","px-4 py-2.5 rounded-full text-sm font-medium min-h-[44px] whitespace-nowrap","transition-all duration-200 hover:bg-gray-200 dark:hover:bg-gray-700"),"data-testid":"tab-all",children:["All (",Be.all,")"]}),e.jsxs($,{value:"iep",className:o("data-[state=active]:bg-blue-500 data-[state=active]:text-white","bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300","px-4 py-2.5 rounded-full text-sm font-medium min-h-[44px] whitespace-nowrap","transition-all duration-200 hover:bg-gray-200 dark:hover:bg-gray-700"),"data-testid":"tab-iep",children:["IEPs (",Be.iep,")"]}),e.jsxs($,{value:"evaluations",className:o("data-[state=active]:bg-blue-500 data-[state=active]:text-white","bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300","px-4 py-2.5 rounded-full text-sm font-medium min-h-[44px] whitespace-nowrap","transition-all duration-200 hover:bg-gray-200 dark:hover:bg-gray-700"),"data-testid":"tab-evaluations",children:["Evaluations (",Be.evaluations,")"]}),e.jsxs($,{value:"ai-analysis",className:o("data-[state=active]:bg-blue-500 data-[state=active]:text-white","bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300","px-4 py-2.5 rounded-full text-sm font-medium min-h-[44px] whitespace-nowrap","transition-all duration-200 hover:bg-gray-200 dark:hover:bg-gray-700"),"data-testid":"tab-ai-analysis",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"AI Analysis (",Be.aiAnalysis,")"]}),e.jsxs($,{value:"reports",className:o("data-[state=active]:bg-blue-500 data-[state=active]:text-white","bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300","px-4 py-2.5 rounded-full text-sm font-medium min-h-[44px] whitespace-nowrap","transition-all duration-200 hover:bg-gray-200 dark:hover:bg-gray-700"),"data-testid":"tab-reports",children:["Reports (",Be.reports,")"]}),e.jsxs($,{value:"meeting-notes",className:o("data-[state=active]:bg-blue-500 data-[state=active]:text-white","bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300","px-4 py-2.5 rounded-full text-sm font-medium min-h-[44px] whitespace-nowrap","transition-all duration-200 hover:bg-gray-200 dark:hover:bg-gray-700"),"data-testid":"tab-meetings",children:["Meetings (",Be.meetingNotes,")"]})]})})}),e.jsxs(P,{value:oe,className:"space-y-6",children:[e.jsx(n,{variant:"elevated",className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center",children:e.jsx(q,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Search & Filter"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Find your documents quickly"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{placeholder:"Search documents, students, or content...",value:ie,onChange:e=>ne(e.target.value),className:"pl-12 h-12 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 rounded-xl focus:border-blue-500 focus:ring-blue-500/20","data-testid":"search-input"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(z,{value:de,onValueChange:ce,children:[e.jsxs(D,{className:"h-12 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 rounded-xl","data-testid":"filter-type",children:[e.jsx(R,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsx(E,{placeholder:"Filter by type"})]}),e.jsxs(I,{children:[e.jsx(_,{value:"all",children:"All File Types"}),e.jsx(_,{value:"pdf",children:"📄 PDF Files"}),e.jsx(_,{value:"doc",children:"📝 Word Documents"}),e.jsx(_,{value:"txt",children:"📋 Text Files"}),e.jsx(_,{value:"ai review",children:"🧠 AI Analysis"}),e.jsx(_,{value:"upload",children:"📁 Uploaded Files"})]})]}),e.jsxs(c,{onClick:()=>Ae(!Se),variant:Se?"default":"outline",className:"h-12 rounded-xl gap-2 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white border-0","data-testid":"select-mode-toggle",children:[Se?e.jsx(V,{className:"h-4 w-4"}):e.jsx(J,{className:"h-4 w-4"}),Se?"Exit Select":"Select Multiple"]})]})]})]})}),Se&&e.jsx(n,{variant:"glass",className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center",children:e.jsx(V,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:ke.size>0?`${ke.size} documents selected`:"Select documents for actions"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Choose documents to perform bulk operations"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Te&&Te.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{if(!Te)return;const e=Te.map(e=>e.id);Ce(new Set(e))},disabled:ke.size===Te.length,className:"h-10 px-4 rounded-full bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20","data-testid":"select-all",children:"Select All"}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{Ce(new Set)},disabled:0===ke.size,className:"h-10 px-4 rounded-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700","data-testid":"deselect-all",children:"Deselect All"})]}),ke.size>0&&e.jsxs(u,{children:[e.jsx(x,{asChild:!0,children:e.jsxs(c,{size:"sm",className:"h-10 px-4 rounded-full gap-2 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white border-0","data-testid":"bulk-actions",children:[e.jsx(W,{className:"h-4 w-4"}),"Actions (",ke.size,")"]})}),e.jsxs(h,{align:"end",className:"w-52",children:[e.jsxs(g,{onClick:()=>{if(0===ke.size)return;(Te?.filter(e=>ke.has(e.id))||[]).forEach(e=>Me(e)),re({title:"Downloads started",description:`Started downloading ${ke.size} document(s).`})},className:"gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Download Selected"]}),e.jsxs(g,{onClick:()=>{if(0===ke.size)return;const e=(Te?.filter(e=>ke.has(e.id))||[]).map(e=>({title:e.title,type:e.category,date:e.created_at}));navigator.clipboard.writeText(JSON.stringify(e,null,2)),re({title:"Copied to clipboard",description:`${ke.size} document(s) information copied for sharing.`})},className:"gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Share Selected"]}),e.jsxs(g,{onClick:()=>{0!==ke.size&&(be("BULK_ASSIGN"),ve(""))},className:"gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Assign to Student"]}),e.jsx(p,{}),e.jsxs(g,{onClick:async()=>{if(0!==ke.size&&window.confirm(`Are you sure you want to delete ${ke.size} document(s)? This action cannot be undone.`))try{for(const e of ke)Fe.mutate(e);Ce(new Set),Ae(!1),re({title:"Documents deleted",description:`${ke.size} document(s) have been successfully deleted.`})}catch(e){re({title:"Error",description:"Failed to delete some documents. Please try again.",variant:"destructive"})}},className:"text-destructive focus:text-destructive focus:bg-destructive/10 gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Delete Selected"]})]})]})]})]})}),De?e.jsx(n,{variant:"elevated",className:"p-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 mx-auto flex items-center justify-center animate-pulse",children:e.jsx(Y,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Loading Documents"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Please wait while we fetch your documents..."})]})]})}):0===Te?.length?e.jsx(n,{variant:"elevated",className:"p-12",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 mx-auto flex items-center justify-center",children:e.jsx(Y,{className:"h-10 w-10 text-gray-400"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:ie||"all"!==de?"No matching documents":"No documents yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto leading-relaxed",children:ie||"all"!==de?"No documents match your current search criteria. Try adjusting your filters or search terms.":"Get started by uploading your first document using the upload section above."})]}),(ie||"all"!==de)&&e.jsxs(c,{onClick:()=>{ne(""),ce("all")},className:"mt-6 h-12 px-6 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white border-0","data-testid":"clear-filters",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})}):e.jsx("div",{className:o("space-y-4","grid"===ue&&"grid grid-cols-1 sm:grid-cols-2 gap-4 space-y-0"),children:Te?.map(s=>{const t=Ie?.find(e=>e.id===s.student_id);return e.jsxs(n,{variant:"interactive",className:o("p-4 relative overflow-hidden group",ke.has(s.id)&&"ring-2 ring-blue-500 bg-blue-50/50 dark:bg-blue-950/20"),onClick:()=>!Se&&Pe(s),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-blue-50/30 to-transparent dark:from-blue-950/10 rounded-full transform translate-x-12 -translate-y-12"}),e.jsxs("div",{className:"relative z-10 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Se&&e.jsx("input",{type:"checkbox",checked:ke.has(s.id),onChange:e=>{var t;e.stopPropagation(),t=s.id,Ce(e=>{const s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 mt-1","data-testid":`select-document-${s.id}`}),e.jsx("div",{className:o("w-10 h-10 rounded-xl flex items-center justify-center text-lg flex-shrink-0","AI Analysis"===s.category?"bg-gradient-to-br from-purple-100 to-purple-200 dark:from-purple-900 dark:to-purple-800 text-purple-600 dark:text-purple-400":"bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900 dark:to-blue-800 text-blue-600 dark:text-blue-400"),children:"AI Analysis"===s.category?e.jsx(U,{className:"h-5 w-5"}):e.jsx(Y,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight truncate",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:s.file_name})]})]}),e.jsxs(u,{children:[e.jsx(x,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsxs(h,{align:"end",className:"w-48",children:[e.jsxs(g,{onClick:e=>{e.stopPropagation(),Pe(s)},"data-testid":`menu-view-${s.id}`,children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(g,{onClick:e=>{e.stopPropagation(),Me(s)},"data-testid":`menu-download-${s.id}`,children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsx(p,{}),e.jsxs(g,{onClick:e=>{e.stopPropagation(),Le(s.id,s.title)},"data-testid":`menu-edit-filename-${s.id}`,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Edit Name"]}),e.jsxs(g,{onClick:e=>{var t;e.stopPropagation(),t=s.id,be(t),ve("")},"data-testid":`menu-assign-student-${s.id}`,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Assign Student"]}),e.jsxs(g,{onClick:e=>{e.stopPropagation(),(e=>{navigator.clipboard.writeText(`Shared document: ${e.title}`),re({title:"Link copied",description:"Document link copied to clipboard"})})(s)},"data-testid":`menu-share-${s.id}`,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsx(p,{}),e.jsxs(g,{onClick:e=>{var t,a;e.stopPropagation(),t=s.id,a=s.file_name,confirm(`Are you sure you want to delete "${a}"?`)&&Fe.mutate(t)},className:"text-destructive focus:text-destructive focus:bg-destructive/10","data-testid":`menu-delete-${s.id}`,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.category&&e.jsxs(A,{variant:"AI Analysis"===s.category?"default":"secondary",className:o("text-xs","AI Analysis"===s.category?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300"),children:["AI Analysis"===s.category&&e.jsx(U,{className:"h-3 w-3 mr-1"}),s.category]}),t&&e.jsxs(A,{variant:"outline",className:"text-xs",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),t.full_name]})]}),s.created_at&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(te,{className:"h-3 w-3 mr-1 inline"}),ae(new Date(s.created_at),"MMM d, yyyy")]})]})]})]},s.id)})})]})]})})]}),e.jsx(v,{open:!!he,onOpenChange:e=>!e&&ge(null),children:e.jsxs(N,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsx(k,{children:"Edit Document Name"}),e.jsx(C,{children:"Change the display name for this document."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"filename",children:"Document Name"}),e.jsx(m,{id:"filename",value:pe,onChange:e=>je(e.target.value),placeholder:"Enter new document name",className:"h-12"})]})}),e.jsxs(S,{children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>{ge(null),je("")},children:"Cancel"}),e.jsx(c,{type:"button",onClick:$e,disabled:!pe.trim(),children:"Save Changes"})]})]})}),e.jsx(v,{open:Ne.isOpen,onOpenChange:e=>we({...Ne,isOpen:e}),children:e.jsxs(N,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(w,{children:[e.jsx(k,{children:Ne.document?.title}),e.jsx(C,{children:"Document details and content preview"})]}),e.jsxs("div",{className:"space-y-4",children:["AI Analysis"===Ne.document?.category&&(()=>{let s;try{s=Ne.document.content?JSON.parse(Ne.document.content):null}catch{s=null}if(s)return e.jsxs("div",{className:"space-y-6",children:[s.summary&&e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Summary"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:s.summary})]}),s.recommendations&&e.jsxs("div",{className:"border-l-4 border-green-500 pl-4 bg-green-50 dark:bg-green-950/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800 dark:text-green-200 mb-2",children:"Recommendations"}),e.jsx("p",{className:"text-green-700 dark:text-green-300",children:s.recommendations})]}),s.areasOfConcern&&e.jsxs("div",{className:"border-l-4 border-orange-500 pl-4 bg-orange-50 dark:bg-orange-950/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-800 dark:text-orange-200 mb-2",children:"Areas of Concern"}),e.jsx("p",{className:"text-orange-700 dark:text-orange-300",children:s.areasOfConcern})]}),s.strengths&&e.jsxs("div",{className:"border-l-4 border-emerald-500 pl-4 bg-emerald-50 dark:bg-emerald-950/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-emerald-800 dark:text-emerald-200 mb-2",children:"Strengths"}),e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300",children:s.strengths})]}),s.actionItems&&e.jsxs("div",{className:"border-l-4 border-purple-500 pl-4 bg-purple-50 dark:bg-purple-950/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Action Items"}),e.jsx("p",{className:"text-purple-700 dark:text-purple-300",children:s.actionItems})]})]})})(),"AI Analysis"!==Ne.document?.category&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:"File Name"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Ne.document?.file_name})]}),e.jsxs("div",{children:[e.jsx(j,{children:"File Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Ne.document?.file_type})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Category"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Ne.document?.category})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Size"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Ne.document?.file_size?(e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(Ne.document.file_size):"Unknown"})]})]}),Ne.document?.description&&e.jsxs("div",{children:[e.jsx(j,{children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Ne.document.description})]})]})]})]})}),e.jsx(v,{open:!!ye,onOpenChange:e=>!e&&be(null),children:e.jsxs(N,{children:[e.jsxs(w,{children:[e.jsx(k,{children:"BULK_ASSIGN"===ye?"Assign Documents to Student":"Assign Document to Student"}),e.jsx(C,{children:"BULK_ASSIGN"===ye?`Choose a student to assign ${ke.size} selected documents to.`:"Choose a student to assign this document to."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(j,{htmlFor:"student-select",children:"Student"}),e.jsxs(z,{value:fe,onValueChange:ve,children:[e.jsx(D,{id:"student-select",className:"h-12",children:e.jsx(E,{placeholder:"Select a student"})}),e.jsx(I,{children:Ie?.map(s=>e.jsx(_,{value:s.id,children:s.full_name},s.id))})]})]})}),e.jsxs(S,{children:[e.jsx(c,{variant:"outline",onClick:()=>be(null),children:"Cancel"}),e.jsx(c,{onClick:"BULK_ASSIGN"===ye?()=>{"BULK_ASSIGN"===ye&&fe&&(ke.forEach(e=>{_e.mutate({id:e,student_id:fe})}),re({title:"Documents assigned",description:`${ke.size} document(s) assigned to student successfully.`}),be(null),ve(""),Ce(new Set),Ae(!1))}:()=>{ye&&fe&&(_e.mutate({id:ye,student_id:fe}),be(null),ve(""))},disabled:!fe,className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600",children:"Assign Student"})]})]})})]})})};export{re as default};
