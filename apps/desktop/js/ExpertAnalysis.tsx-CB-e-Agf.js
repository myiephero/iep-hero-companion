import{j as e}from"./chunk-DsWtD-um.js";import{r as s,R as a}from"./chunk--CdJ9rTh.js";import{a as t,D as l,C as r,d as i,e as c,f as n,h as o,L as d,B as m}from"../assets/index-BO9uTDme.js";import{B as x}from"./chunk-qxwVooB6.js";import{T as h,a as u,b as p,c as j}from"./chunk-BxqMa7bc.js";import{A as y,a as f}from"./chunk-DMdvVhpo.js";import{B as g,aU as N,f as v,y as b,w,aa as k}from"./chunk-CIO6T0Sb.js";import"./chunk-DiCKXT8z.js";function A(){const[A,E]=s.useState(null),[C,S]=s.useState("comprehensive"),[_,q]=s.useState(!1),[P,I]=s.useState([]),[F,R]=s.useState("request"),[T,D]=s.useState(!1),{toast:B}=t(),z=async()=>{D(!0);try{const e=localStorage.getItem("authToken"),s=await fetch("/api/expert-analysis",{credentials:"include",headers:{Authorization:e?`Bearer ${e}`:""}});if(s.ok){const e=await s.json();I(e.analyses||[])}else console.error("Failed to fetch analyses")}catch(e){console.error("Error fetching analyses:",e)}finally{D(!1)}};a.useEffect(()=>{z()},[]);return e.jsx(l,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Expert IEP Analysis"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Get professional analysis of your IEP documents from certified special education experts"})]}),e.jsxs(h,{value:F,onValueChange:R,className:"space-y-6",children:[e.jsxs(u,{className:"grid w-full grid-cols-2",children:[e.jsx(p,{value:"request",children:"Request Analysis"}),e.jsx(p,{value:"results",children:"My Analyses"})]}),e.jsx(j,{value:"request",className:"space-y-6",children:e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Request Expert Analysis"]}),e.jsx(n,{children:"Upload your IEP document and select the type of analysis you need"})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"file-upload",children:"IEP Document"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-6 text-center",children:[e.jsx("input",{id:"file-upload",type:"file",accept:".pdf,.doc,.docx",onChange:e=>{const s=e.target.files?.[0];s&&E(s)},className:"hidden"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(N,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:A?A.name:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, DOC, or DOCX files up to 50MB"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{children:"Analysis Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(r,{className:"cursor-pointer transition-colors "+("comprehensive"===C?"ring-2 ring-blue-500":""),onClick:()=>S("comprehensive"),children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-semibold",children:"Comprehensive"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Full review of goals, services, accommodations, and legal compliance"}),e.jsx(x,{variant:"secondary",className:"mt-2",children:"Most Popular"})]})}),e.jsx(r,{className:"cursor-pointer transition-colors "+("focused"===C?"ring-2 ring-blue-500":""),onClick:()=>S("focused"),children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-semibold",children:"Focused"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Targeted review of specific areas or goals you're concerned about"})]})}),e.jsx(r,{className:"cursor-pointer transition-colors "+("compliance"===C?"ring-2 ring-blue-500":""),onClick:()=>S("compliance"),children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-semibold",children:"Compliance"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Legal compliance check focusing on procedural requirements"})]})})]})]}),e.jsxs(y,{children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx(f,{children:"Expert analyses are completed by certified special education professionals within 24-48 hours. Cost: $150 for comprehensive, $75 for focused, $50 for compliance review."})]}),e.jsx(m,{onClick:async()=>{if(A){q(!0);try{const e=localStorage.getItem("authToken"),s=await fetch("/api/expert-analysis",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""},body:JSON.stringify({analysis_type:C,student_name:"Student Analysis",file_name:A.name,file_size:A.size})});if(!s.ok)throw new Error("Analysis request failed");await s.json();B({title:"Analysis Requested",description:"Your expert analysis has been submitted and will be completed within 24-48 hours."}),await z(),R("results"),E(null)}catch(e){console.error("Analysis error:",e),B({title:"Error",description:"Failed to submit analysis request. Please try again.",variant:"destructive"})}finally{q(!1)}}else B({title:"Error",description:"Please select an IEP document first",variant:"destructive"})},disabled:!A||_,className:"w-full",size:"lg",children:_?"Submitting...":"Request Expert Analysis"})]})]})}),e.jsxs(j,{value:"results",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"My Expert Analyses"})}),0===P.length?e.jsx(r,{children:e.jsxs(o,{className:"p-12 text-center",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No analyses yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Request your first expert analysis to get professional insights on your IEP"}),e.jsx(m,{onClick:()=>R("request"),children:"Request Analysis"})]})}):e.jsx("div",{className:"space-y-4",children:P.map(s=>e.jsx(r,{children:e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.student_name}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(x,{variant:"comprehensive"===s.analysis_type?"default":"secondary",children:s.analysis_type}),e.jsxs("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(k,{className:"h-4 w-4"}),new Date(s.created_at).toLocaleDateString()]})]})]}),e.jsx(x,{variant:"completed"===s.status?"default":"in_progress"===s.status?"secondary":"outline",children:s.status.replace("_"," ")})]}),"completed"===s.status?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s.overall_score,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.strengths.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Strengths"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:s.areas_for_improvement.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Improvements"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.compliance_issues.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Issues"})]})]}),e.jsx(m,{variant:"outline",className:"w-full",children:"View Full Analysis Report"})]}):e.jsx("div",{className:"text-center py-4",children:e.jsxs("p",{className:"text-gray-600",children:["Your analysis is ",s.status,". You'll receive an email when it's complete."]})})]})},s.id))})]})]})]})})}export{A as default};
