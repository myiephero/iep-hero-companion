import{j as e}from"./chunk-DsWtD-um.js";import{r as s,L as t}from"./chunk--CdJ9rTh.js";import{b as a,u as i,c as n}from"./chunk-DiCKXT8z.js";import{T as r}from"./chunk-CzMW7U9Y.js";import{a as l,C as d,d as c,e as o,f as m,h as x,B as h,m as p}from"../assets/index-4xq_U8Za.js";import{B as g}from"./chunk-dWvI_tCU.js";import{P as j}from"./chunk-CeDn3LK_.js";import{S as u}from"./chunk-DATiskzp.js";import{B as f,b as N,x as b,y as v,N as y,Z as w,ae as k,z as C,A as _,L as A,U as S,T as I,a1 as E,aN as L,aq as G}from"./chunk-CIO6T0Sb.js";import"./chunk-C503eIeV.js";const T=()=>{const[T,F]=s.useState(""),[R,$]=s.useState(null),[q,z]=s.useState(!1),[D,B]=s.useState(!1),{toast:K}=l(),P=a(),{data:O}=i({queryKey:["/api/students"],queryFn:async()=>(await p("GET","/api/students")).json()}),{data:U,isLoading:M}=i({queryKey:["/api/gifted-ai-analysis",T],queryFn:async()=>{if(!T)return null;return(await p("GET",`/api/gifted_assessments/ai-insights?student_id=${T}`)).json()},enabled:!!T}),{data:Q}=i({queryKey:["/api/gifted-profile",T],queryFn:async()=>{if(!T)return null;return(await p("GET",`/api/gifted_assessments/profile?student_id=${T}`)).json()},enabled:!!T}),V=n({mutationFn:async e=>{z(!0);return(await p("POST","/api/gifted_assessments/ai-insights",{student_id:e,analysis_type:"comprehensive"})).json()},onSuccess:e=>{$(e),B(!0),P.invalidateQueries({queryKey:["/api/gifted-ai-analysis"]}),K({title:"AI Insights Generated! ðŸ§ âœ¨",description:"Comprehensive gifted insights have been generated for your child"})},onError:e=>{console.error("Error generating AI insights:",e),K({title:"Error generating insights",description:"Please try again or ensure the student has completed other assessment tools first",variant:"destructive"})},onSettled:()=>{z(!1)}}),W=()=>!!Q?.assessments&&Q.assessments.length>0,Y=O?.find(e=>e.id===T)?.full_name||"your child",{completed:Z,total:H,tools:J}=(()=>{if(!Q?.assessments)return{completed:0,total:4,tools:[]};const e=Q.assessments.map(e=>e.assessment_type),s=[{name:"Cognitive",completed:e.includes("cognitive"),icon:f,color:"text-purple-600"},{name:"Academic",completed:e.includes("academic"),icon:C,color:"text-blue-600"},{name:"Creative",completed:e.includes("creative"),icon:G,color:"text-pink-600"},{name:"Leadership",completed:e.includes("leadership"),icon:S,color:"text-green-600"}];return{completed:s.filter(e=>e.completed).length,total:4,tools:s}})(),X=Math.round(Z/H*100),ee=R||U?.analyses?.[0]?.ai_analysis;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[e.jsx(r,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-gradient-to-r from-orange-500 to-pink-600 rounded-full mb-4",children:e.jsx(f,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"AI Gifted Insights"}),e.jsxs(g,{className:"bg-gradient-to-r from-orange-500 to-pink-500 text-white font-bold",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),"NEW"]})]}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Get comprehensive AI-powered insights and recommendations based on ",Y,"'s gifted and 2e profile. Our advanced analysis provides evidence-based strategies and personalized educational recommendations."]})]}),e.jsxs(d,{className:"mb-6",children:[e.jsxs(c,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-orange-600"}),"Student Selection"]}),e.jsx(m,{children:"Choose the student to generate AI insights for"})]}),e.jsx(x,{children:e.jsx(u,{selectedStudent:T,onStudentChange:F,placeholder:"Select student for AI insights"})})]}),T&&e.jsxs(d,{className:"mb-6",children:[e.jsxs(c,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5 text-green-600"}),"Assessment Completion Status"]}),e.jsx(m,{children:"Complete assessment tools to unlock comprehensive AI insights"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Assessments Completed"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[Z," of ",H]})]}),e.jsx(j,{value:X,className:"h-3"}),e.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:J.map(s=>e.jsx(d,{className:"p-3 "+(s.completed?"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800":"bg-muted/30"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"h-4 w-4 "+(s.completed?"text-green-600":"text-muted-foreground")}),e.jsx("span",{className:"text-sm font-medium",children:s.name}),s.completed?e.jsx(v,{className:"h-3 w-3 text-green-600 ml-auto"}):e.jsx(y,{className:"h-3 w-3 text-muted-foreground ml-auto"})]})},s.name))}),!W()&&e.jsx("div",{className:"bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"h-5 w-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-900 dark:text-amber-100 mb-1",children:"Complete Assessment Tools First"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mb-3",children:"To generate AI insights, please complete at least one of the gifted assessment tools: Cognitive, Academic, Creative, or Leadership."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(h,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(t,{to:"/parent/gifted-tools/cognitive",children:"Complete Cognitive"})}),e.jsx(h,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(t,{to:"/parent/gifted-tools/academic",children:"Complete Academic"})}),e.jsx(h,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(t,{to:"/parent/gifted-tools/creative",children:"Complete Creative"})}),e.jsx(h,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(t,{to:"/parent/gifted-tools/leadership",children:"Complete Leadership"})})]})]})]})})]})})]}),W()&&!ee&&e.jsx(d,{className:"mb-6 bg-gradient-to-r from-orange-50 to-pink-50 dark:from-orange-950 dark:to-pink-950 border-orange-200 dark:border-orange-800",children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx(f,{className:"h-12 w-12 text-orange-600 dark:text-orange-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Ready for AI Analysis"}),e.jsxs("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:["Generate comprehensive AI insights based on ",Y,"'s completed gifted assessment tools."]}),e.jsx(h,{onClick:()=>{T?W()?V.mutate(T):K({title:"Complete assessment tools first",description:"Please complete at least one assessment tool (Cognitive, Academic, Creative, or Leadership) before generating AI insights",variant:"destructive"}):K({title:"Please select a student",description:"Choose a student to generate AI insights for",variant:"destructive"})},disabled:q||!T,size:"lg",className:"bg-gradient-to-r from-orange-600 to-pink-600 hover:from-orange-700 hover:to-pink-700","data-testid":"button-generate-insights",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Generating Insights..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),"Generate AI Insights"]})})]})}),ee&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-blue-200 dark:border-blue-800",children:e.jsxs(x,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(w,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"AI Analysis Complete!"}),e.jsxs(g,{className:"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:["Generated ",U?.analyses?.[0]?.timestamp?new Date(U.analyses[0].timestamp).toLocaleDateString():"Recently"]})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Comprehensive gifted insights have been generated for ",Y,". Review the detailed analysis and recommendations below."]})]})}),ee.key_findings&&e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-yellow-600"}),"Key Findings"]})}),e.jsx(x,{children:e.jsx("ul",{className:"space-y-3",children:ee.key_findings.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:s})]},t))})})]}),ee.detailed_analysis&&e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-purple-600"}),"Detailed Analysis"]})}),e.jsx(x,{children:e.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:ee.detailed_analysis})})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[ee.educational_recommendations&&e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2 text-base",children:[e.jsx(C,{className:"h-4 w-4 text-blue-600"}),"Educational Recommendations"]})}),e.jsx(x,{children:e.jsx("ul",{className:"space-y-2 text-sm",children:ee.educational_recommendations.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(_,{className:"h-3 w-3 text-blue-600 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:s})]},t))})})]}),ee.enrichment_activities&&e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2 text-base",children:[e.jsx(A,{className:"h-4 w-4 text-yellow-600"}),"Enrichment Activities"]})}),e.jsx(x,{children:e.jsx("ul",{className:"space-y-2 text-sm",children:ee.enrichment_activities.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(_,{className:"h-3 w-3 text-yellow-600 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:s})]},t))})})]}),ee.social_emotional_support&&e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2 text-base",children:[e.jsx(S,{className:"h-4 w-4 text-green-600"}),"Social-Emotional Support"]})}),e.jsx(x,{children:e.jsx("ul",{className:"space-y-2 text-sm",children:ee.social_emotional_support.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(_,{className:"h-3 w-3 text-green-600 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:s})]},t))})})]}),ee.twice_exceptional_support&&e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2 text-base",children:[e.jsx(I,{className:"h-4 w-4 text-purple-600"}),"Twice-Exceptional Support"]})}),e.jsx(x,{children:e.jsx("ul",{className:"space-y-2 text-sm",children:ee.twice_exceptional_support.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(_,{className:"h-3 w-3 text-purple-600 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:s})]},t))})})]})]}),ee.evidence_base&&e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-indigo-600"}),"Evidence-Based Foundation"]})}),e.jsx(x,{children:e.jsx("p",{className:"text-muted-foreground text-sm",children:ee.evidence_base})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center mt-8 pt-6 border-t",children:[e.jsx(h,{asChild:!0,variant:"ghost","data-testid":"button-back-to-gifted-hub",children:e.jsxs(t,{to:"/parent/gifted-tools",className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Back to Gifted Tools"]})}),ee&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(h,{variant:"outline",onClick:()=>{const e=`Gifted AI Insights Report for ${Y}\n\nGenerated: ${(new Date).toLocaleDateString()}\n\n${ee.detailed_analysis||""}\n\nKey Findings:\n${(ee.key_findings||[]).map((e,s)=>`${s+1}. ${e}`).join("\n")}`,s=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`${Y}-gifted-ai-insights-${(new Date).toISOString().split("T")[0]}.txt`,a.click(),URL.revokeObjectURL(t)},"data-testid":"button-download-report",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Download Report"]}),e.jsx(h,{asChild:!0,"data-testid":"button-view-accommodations",children:e.jsxs(t,{to:"/parent/students",className:"flex items-center gap-2",children:["View in Student Profile",e.jsx(_,{className:"h-4 w-4"})]})})]})]})]})]})};export{T as default};
