import{j as e}from"./chunk-DsWtD-um.js";import{r as s}from"./chunk--CdJ9rTh.js";import{a,m as n,D as t,C as i,d as r,e as l,f as c,h as d,B as o,L as m}from"../assets/index-DhCC2x2k.js";import{T as h}from"./chunk-DWdWJmEp.js";import{B as x}from"./chunk-hdVtyTqo.js";import{S as g,a as u,b as f,c as p,d as j}from"./chunk-C5NgAHBI.js";import{D as v,e as N,a as _,b,c as y,d as w,f as A}from"./chunk-ToNE_7ss.js";import{T as S,a as C,b as E,c as k}from"./chunk-DtCxjXZ2.js";import{C as D}from"./chunk-BpCC2vTU.js";import{S as F}from"./chunk-CVrsoyy-.js";import{ac as P,B as I,ad as L,ae as T,Z as G,ab as $,T as z,L as O,U as V,z as R}from"./chunk-CIO6T0Sb.js";import"./chunk-DiCKXT8z.js";const B=["Intellectual/Academic","Creative/Divergent Thinking","Artistic/Visual Arts","Musical","Leadership","Psychomotor","Mathematical","Scientific","Linguistic/Verbal","Spatial"],M=["ADHD","Autism Spectrum Disorder","Dyslexia","Dysgraphia","Dyscalculia","Executive Function Deficits","Processing Speed Deficits","Working Memory Challenges","Sensory Processing Disorder","Anxiety","Depression"],q=[{value:"cognitive",label:"Cognitive Assessment",description:"IQ and cognitive abilities evaluation"},{value:"academic",label:"Academic Assessment",description:"Subject-specific academic abilities"},{value:"creative",label:"Creative Assessment",description:"Creative thinking and artistic abilities"},{value:"leadership",label:"Leadership Assessment",description:"Leadership potential and skills"},{value:"artistic",label:"Artistic Assessment",description:"Visual and performing arts talents"},{value:"twice_exceptional",label:"Twice-Exceptional Profile",description:"Comprehensive 2e evaluation"}];function H(){const[H,K]=s.useState([]),[Q,U]=s.useState(""),[W,Z]=s.useState([]),[J,X]=s.useState(!1),[Y,ee]=s.useState(!0),[se,ae]=s.useState({}),[ne,te]=s.useState({}),[ie,re]=s.useState("parent"),[le,ce]=s.useState({assessment_type:"twice_exceptional",giftedness_areas:[],learning_differences:[],strengths:"",challenges:"",recommendations:"",acceleration_needs:"",enrichment_activities:"",social_emotional_needs:"",evaluator_notes:""}),{toast:de}=a();s.useEffect(()=>{oe(),me()},[Q]),s.useEffect(()=>{re(window.location.pathname.includes("advocate")?"advocate":"parent")},[]),s.useEffect(()=>{Q&&me()},[ie]);const oe=async()=>{try{const e=await n("GET","/api/students"),s=await e.json();Z(s||[])}catch(e){console.error("Error fetching students:",e)}},me=async()=>{try{if(!Q)return K([]),void te({});const e=await n("GET",`/api/gifted-assessments?student_id=${Q}`),s=await e.json();K(s||[]);const a={};(s||[]).forEach(e=>{const s="parent"===ie?e.ai_analysis_parent:e.ai_analysis_advocate;s&&(a[e.id]=s)}),te(a)}catch(e){console.error("Error fetching assessments:",e),de({title:"Error",description:"Failed to load assessments. Please try again.",variant:"destructive"})}finally{ee(!1)}};return e.jsx(t,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Gifted & Twice-Exceptional Learners"}),e.jsx("p",{className:"text-muted-foreground",children:"Create comprehensive profiles for gifted and twice-exceptional (2e) learners, including strengths, challenges, and specialized educational recommendations."})]}),e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Select Student"}),e.jsx(c,{children:"Choose a student to create or view gifted education assessments."})]}),e.jsx(d,{children:e.jsx(F,{selectedStudent:Q||"",onStudentChange:e=>U(e||"")})})]}),Q&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Assessment Profiles"}),e.jsxs(v,{open:J,onOpenChange:X,children:[e.jsx(N,{asChild:!0,children:e.jsxs(o,{children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Create Assessment Profile"]})}),e.jsxs(_,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(b,{children:[e.jsx(y,{children:"Create Gifted/2e Assessment Profile"}),e.jsx(w,{children:"Document the student's giftedness, learning differences, and educational needs."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"assessment-type",children:"Assessment Type"}),e.jsxs(g,{value:le.assessment_type,onValueChange:e=>ce(s=>({...s,assessment_type:e})),children:[e.jsx(u,{children:e.jsx(f,{})}),e.jsx(p,{children:q.map(s=>e.jsx(j,{value:s.value,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.label}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description})]})},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-base font-medium",children:"Areas of Giftedness"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Select all areas where the student demonstrates exceptional ability."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:B.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{id:s,checked:le.giftedness_areas.includes(s),onCheckedChange:e=>((e,s)=>{ce(a=>({...a,giftedness_areas:s?[...a.giftedness_areas,e]:a.giftedness_areas.filter(s=>s!==e)}))})(s,e)}),e.jsx(m,{htmlFor:s,className:"text-sm font-normal",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-base font-medium",children:"Learning Differences (2e Profile)"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Select any learning differences or challenges (for twice-exceptional profile)."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:M.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{id:s,checked:le.learning_differences.includes(s),onCheckedChange:e=>((e,s)=>{ce(a=>({...a,learning_differences:s?[...a.learning_differences,e]:a.learning_differences.filter(s=>s!==e)}))})(s,e)}),e.jsx(m,{htmlFor:s,className:"text-sm font-normal",children:s})]},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"strengths",children:"Strengths & Abilities"}),e.jsx(h,{id:"strengths",placeholder:"Describe the student's key strengths, talents, and exceptional abilities...",value:le.strengths,onChange:e=>ce(s=>({...s,strengths:e.target.value})),rows:3})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"challenges",children:"Challenges & Areas of Need"}),e.jsx(h,{id:"challenges",placeholder:"Describe areas where the student struggles or needs support...",value:le.challenges,onChange:e=>ce(s=>({...s,challenges:e.target.value})),rows:3})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"recommendations",children:"Educational Recommendations"}),e.jsx(h,{id:"recommendations",placeholder:"Recommend educational strategies, interventions, and supports...",value:le.recommendations,onChange:e=>ce(s=>({...s,recommendations:e.target.value})),rows:3})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"acceleration",children:"Acceleration Needs"}),e.jsx(h,{id:"acceleration",placeholder:"Describe any acceleration needs (grade skipping, subject acceleration, etc.)...",value:le.acceleration_needs,onChange:e=>ce(s=>({...s,acceleration_needs:e.target.value})),rows:2})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"enrichment",children:"Enrichment Activities"}),e.jsx(h,{id:"enrichment",placeholder:"Suggest enrichment activities, programs, and opportunities...",value:le.enrichment_activities,onChange:e=>ce(s=>({...s,enrichment_activities:e.target.value})),rows:2})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"social-emotional",children:"Social-Emotional Needs"}),e.jsx(h,{id:"social-emotional",placeholder:"Address social-emotional development, perfectionism, anxiety, etc...",value:le.social_emotional_needs,onChange:e=>ce(s=>({...s,social_emotional_needs:e.target.value})),rows:2})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"evaluator-notes",children:"Additional Notes"}),e.jsx(h,{id:"evaluator-notes",placeholder:"Any additional observations, recommendations, or important information...",value:le.evaluator_notes,onChange:e=>ce(s=>({...s,evaluator_notes:e.target.value})),rows:2})]})]})]}),e.jsx(A,{children:e.jsx(o,{onClick:async()=>{try{if(!Q)throw new Error("No student selected");const e={student_id:Q,assessment_type:le.assessment_type,giftedness_areas:le.giftedness_areas,learning_differences:le.learning_differences.length>0?le.learning_differences:null,strengths:{notes:le.strengths},challenges:le.challenges?{notes:le.challenges}:null,recommendations:le.recommendations?{notes:le.recommendations}:null,acceleration_needs:le.acceleration_needs?{notes:le.acceleration_needs}:null,enrichment_activities:le.enrichment_activities?{notes:le.enrichment_activities}:null,social_emotional_needs:le.social_emotional_needs?{notes:le.social_emotional_needs}:null,twice_exceptional_profile:le.learning_differences.length>0?{giftedness:le.giftedness_areas,learning_differences:le.learning_differences,intersection_notes:le.evaluator_notes}:null,evaluator_notes:le.evaluator_notes||null,status:"active"},s=await n("POST","/api/gifted-assessments",e);if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to create assessment")}de({title:"Success",description:"Assessment profile created successfully!"}),me(),X(!1),ce({assessment_type:"twice_exceptional",giftedness_areas:[],learning_differences:[],strengths:"",challenges:"",recommendations:"",acceleration_needs:"",enrichment_activities:"",social_emotional_needs:"",evaluator_notes:""})}catch(e){console.error("Error creating assessment:",e),de({title:"Error",description:"Failed to create assessment. Please try again.",variant:"destructive"})}},disabled:0===le.giftedness_areas.length||!le.strengths,children:"Create Assessment Profile"})})]})]})]}),Y?e.jsx(i,{children:e.jsx(d,{className:"text-center py-12",children:e.jsx("div",{className:"text-lg",children:"Loading assessments..."})})}):0===H.length?e.jsx(i,{children:e.jsxs(d,{className:"text-center py-12",children:[e.jsx(I,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No assessment profiles yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Create an assessment profile to document this student's gifted abilities and learning needs."})]})}):e.jsx("div",{className:"space-y-6",children:H.map(s=>{const a=(e=>{switch(e){case"cognitive":return I;case"academic":return R;case"creative":return O;case"leadership":return V;case"artistic":return T;case"twice_exceptional":return G;default:return z}})(s.assessment_type);return e.jsxs(i,{className:"overflow-hidden",children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(a,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(l,{children:q.find(e=>e.value===s.assessment_type)?.label}),e.jsx(c,{children:new Date(s.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.learning_differences&&s.learning_differences.length>0&&e.jsx(x,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"2e Profile"}),e.jsxs(x,{variant:"outline",children:[s.giftedness_areas.length," Area",1!==s.giftedness_areas.length?"s":""]})]})]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"space-x-2",children:[e.jsxs(x,{variant:"outline",className:"capitalize",children:[ie," View"]}),Q&&W.find(e=>e.id===Q)&&e.jsxs(x,{variant:"secondary",className:"bg-blue-50 text-blue-700",children:["Student: ",W.find(e=>e.id===Q)?.full_name]})]}),e.jsxs(o,{onClick:()=>(async e=>{try{if(!W.find(e=>e.id===Q))return void de({title:"Error",description:"Student not found",variant:"destructive"});const s=`\nGifted Assessment - ${new Date(e.created_at).toLocaleDateString()}\nType: ${q.find(s=>s.value===e.assessment_type)?.label}\nAreas of Giftedness: ${e.giftedness_areas.join(", ")}\n${e.learning_differences?.length?`Learning Differences: ${e.learning_differences.join(", ")}`:""}\n${e.evaluator_notes?`Notes: ${e.evaluator_notes}`:""}\n      `.trim();console.log("Assessment summary:",s),de({title:"Assessment Logged",description:"Assessment profile has been logged successfully"})}catch(s){console.error("Error saving assessment to profile:",s),de({title:"Save Failed",description:"Failed to save assessment to student profile. Please try again.",variant:"destructive"})}})(s),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Save to Profile"]})]}),e.jsxs(S,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(C,{children:[e.jsx(E,{value:"overview",children:"Overview"}),e.jsx(E,{value:"strengths",children:"Strengths"}),e.jsx(E,{value:"recommendations",children:"Recommendations"}),e.jsx(E,{value:"support",children:"Support Needs"}),e.jsx(E,{value:"ai-insights",children:"🤖 AI Insights"})]}),e.jsxs(k,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Areas of Giftedness"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.giftedness_areas.map(s=>e.jsx(x,{variant:"secondary",className:"bg-green-100 text-green-700",children:s},s))})]}),s.learning_differences&&s.learning_differences.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Learning Differences"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.learning_differences.map(s=>e.jsx(x,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:s},s))})]}),s.twice_exceptional_profile&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2 text-blue-700",children:[e.jsx(G,{className:"h-4 w-4"}),"Twice-Exceptional Profile"]}),e.jsx("p",{className:"text-sm text-blue-600",children:"This student demonstrates both exceptional abilities and learning differences, requiring specialized educational approaches that address both their gifts and challenges."})]})]}),e.jsxs(k,{value:"strengths",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Strengths & Abilities"]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm leading-relaxed",children:s.strengths?.notes||"No strengths documented."})})]}),s.challenges&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Challenges & Areas of Need"]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm leading-relaxed",children:s.challenges.notes})})]})]}),e.jsxs(k,{value:"recommendations",className:"space-y-4",children:[s.recommendations&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Educational Recommendations"]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm leading-relaxed",children:s.recommendations.notes})})]}),s.acceleration_needs&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Acceleration Needs"]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm leading-relaxed",children:s.acceleration_needs.notes})})]}),s.enrichment_activities&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Enrichment Activities"]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm leading-relaxed",children:s.enrichment_activities.notes})})]})]}),e.jsxs(k,{value:"support",className:"space-y-4",children:[s.social_emotional_needs&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Social-Emotional Needs"]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm leading-relaxed",children:s.social_emotional_needs.notes})})]}),s.evaluator_notes&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Additional Notes"]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm leading-relaxed",children:s.evaluator_notes})})]})]}),e.jsx(k,{value:"ai-insights",className:"space-y-4",children:ne[s.id]?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(I,{className:"h-5 w-5 text-blue-600"}),e.jsxs("h4",{className:"font-semibold text-blue-900",children:["AI-Powered ","parent"===ie?"Parent":"Advocate"," Insights"]})]}),Object.entries(ne[s.id]).map(([s,a])=>a&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2 capitalize",children:s.replace(/_/g," ")}),e.jsx("div",{className:"bg-white rounded-lg p-3 text-sm leading-relaxed",children:"string"==typeof a?a:"object"==typeof a?Object.entries(a).map(([s,a])=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("strong",{className:"text-blue-800",children:[s.replace(/_/g," "),":"]}),e.jsx("p",{className:"mt-1 text-gray-700",children:String(a)})]},s)):String(a)})]},s))]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h4",{className:"font-medium mb-2",children:"No AI insights generated yet"}),e.jsxs("p",{className:"text-muted-foreground text-sm mb-4",children:["Generate AI-powered ","parent"===ie?"parent-friendly guidance":"professional advocate analysis","based on this detailed assessment profile."]}),e.jsx(o,{onClick:()=>(async e=>{try{ae(s=>({...s,[e]:!0}));const s=await n("POST",`/api/gifted-assessments/${e}/ai-analysis`,{role:ie});if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to generate AI insights")}const a=await s.json();te(s=>({...s,[e]:a.ai_analysis})),de({title:"AI Insights Generated",description:`Personalized insights for ${ie}s have been created.`})}catch(s){console.error("Error generating AI insights:",s),de({title:"AI Analysis Failed",description:s instanceof Error?s.message:"Failed to generate insights. Please try again.",variant:"destructive"})}finally{ae(s=>({...s,[e]:!1}))}})(s.id),disabled:se[s.id],variant:"outline",size:"sm",className:"flex items-center gap-2",children:se[s.id]?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin border-2 border-primary border-t-transparent rounded-full"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4"}),"Generate AI Insights"]})})]})})]})]})]},s.id)})})]})]})})}export{H as default};
