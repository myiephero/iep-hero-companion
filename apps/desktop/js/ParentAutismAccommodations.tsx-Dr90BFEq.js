import{j as e}from"./chunk-DsWtD-um.js";import{r as s,L as i}from"./chunk--CdJ9rTh.js";import{u as a}from"./chunk-DiCKXT8z.js";import{T as t}from"./chunk-DGYceqh1.js";import{a as n,C as r,h as o,B as d,d as c,e as l,f as m,m as p}from"../assets/index-DhCC2x2k.js";import{B as u}from"./chunk-hdVtyTqo.js";import{S as h,a as g,b as x,c as f,d as j}from"./chunk-C5NgAHBI.js";import{I as v,ac as w,p as y,y as N,ad as b,aN as k,x as S,A as P,b as T,at as A,U as C,B as E,an as _}from"./chunk-CIO6T0Sb.js";const B=()=>{const[B,R]=s.useState(""),[z,G]=s.useState("all"),[I,L]=s.useState([]),{toast:$}=n(),{data:D}=a({queryKey:["/api/students"],queryFn:async()=>(await p("GET","/api/students")).json()}),F=[{id:"sensory",title:"Sensory Support",icon:e.jsx(A,{className:"h-5 w-5"}),description:"Help your child manage sensory processing challenges",items:[{id:"noise-canceling",title:"Noise-Canceling Headphones",description:"Provide noise-canceling headphones for noisy environments",recommended:!0,parentTip:"Great for cafeteria, assemblies, and classroom noise"},{id:"sensory-breaks",title:"Sensory Breaks",description:"Regular breaks to sensory room or quiet space every 30 minutes",recommended:!0,parentTip:"Helps prevent sensory overload and meltdowns"},{id:"fidget-tools",title:"Fidget Tools",description:"Allow use of fidget toys or stress balls during instruction",recommended:!1,parentTip:"Can help with focus and self-regulation"},{id:"weighted-blanket",title:"Weighted Lap Pad",description:"Use of weighted lap pad for self-regulation during work time",recommended:!1,parentTip:"Provides calming deep pressure input"},{id:"lighting",title:"Lighting Adjustments",description:"Adjusted lighting or seating away from fluorescent lights",recommended:!1,parentTip:"Helps children sensitive to harsh lighting"}]},{id:"communication",title:"Communication",icon:e.jsx(C,{className:"h-5 w-5"}),description:"Support your child's communication and social needs",items:[{id:"visual-schedules",title:"Visual Schedules",description:"Visual schedules and social stories for transitions",recommended:!0,parentTip:"Reduces anxiety about schedule changes"},{id:"communication-device",title:"AAC Device",description:"Access to AAC device or picture cards for communication",recommended:!1,parentTip:"Essential for non-speaking children"},{id:"peer-support",title:"Peer Support",description:"Structured peer interaction opportunities",recommended:!0,parentTip:"Builds social skills in supported settings"},{id:"social-scripts",title:"Social Scripts",description:"Pre-written social scripts for common situations",recommended:!1,parentTip:"Helps with social interactions and greetings"}]},{id:"academic",title:"Academic Support",icon:e.jsx(E,{className:"h-5 w-5"}),description:"Academic accommodations to help your child succeed",items:[{id:"extended-time",title:"Extended Time",description:"Extended time for assignments and tests (1.5x)",recommended:!0,parentTip:"Accounts for processing differences and anxiety"},{id:"chunking",title:"Task Chunking",description:"Breaking assignments into smaller, manageable chunks",recommended:!0,parentTip:"Prevents overwhelm and builds success"},{id:"visual-supports",title:"Visual Supports",description:"Visual supports and graphic organizers for learning",recommended:!0,parentTip:"Helps with organization and understanding"},{id:"repetition",title:"Repeated Instructions",description:"Repeated instructions and clarification as needed",recommended:!1,parentTip:"Ensures understanding before starting tasks"}]},{id:"social",title:"Social Support",icon:e.jsx(C,{className:"h-5 w-5"}),description:"Help your child build meaningful relationships",items:[{id:"social-skills-group",title:"Social Skills Group",description:"Participation in structured social skills group sessions",recommended:!0,parentTip:"Teaches social skills in small, safe groups"},{id:"peer-buddy",title:"Peer Buddy System",description:"Assignment of peer buddy for social support",recommended:!0,parentTip:"Provides natural social modeling and friendship"},{id:"lunch-club",title:"Lunch Club",description:"Structured lunch club for social interaction practice",recommended:!1,parentTip:"Makes lunchtime less overwhelming and more social"}]},{id:"behavioral",title:"Behavioral Support",icon:e.jsx(N,{className:"h-5 w-5"}),description:"Positive strategies for behavior and self-regulation",items:[{id:"behavior-plan",title:"Positive Behavior Support Plan",description:"Individualized positive behavior support plan",recommended:!0,parentTip:"Focuses on teaching replacement behaviors"},{id:"break-cards",title:"Break Request Cards",description:"Visual cards to request breaks when overwhelmed",recommended:!0,parentTip:"Gives your child a way to communicate needs"},{id:"calm-down-space",title:"Calm Down Space",description:"Access to designated calm down space when needed",recommended:!1,parentTip:"Provides a safe space for self-regulation"}]},{id:"environmental",title:"Environmental",icon:e.jsx(_,{className:"h-5 w-5"}),description:"Classroom and environment modifications",items:[{id:"preferential-seating",title:"Preferential Seating",description:"Seating near teacher, away from distractions",recommended:!0,parentTip:"Helps with attention and reduces distractions"},{id:"quiet-space",title:"Access to Quiet Space",description:"Access to quiet space for work completion",recommended:!0,parentTip:"Reduces sensory overload during work time"},{id:"reduced-stimuli",title:"Reduced Environmental Stimuli",description:"Minimize visual and auditory distractions in workspace",recommended:!1,parentTip:"Creates a calm learning environment"}]}],O="all"===z?F:F.filter(e=>e.id===z);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(t,{}),e.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Autism Accommodation Builder"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a personalized accommodation plan to help your child succeed in school"})]})]})}),e.jsx(r,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-0",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Your Child"}),e.jsx(u,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"Parent View"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which child you're creating accommodations for, or create a general plan."}),e.jsxs(h,{value:B,onValueChange:R,children:[e.jsx(g,{className:"max-w-md",children:e.jsx(x,{placeholder:"Select your child..."})}),e.jsxs(f,{children:[e.jsx(j,{value:"general",children:"General Accommodations"}),D?.map(s=>e.jsxs(j,{value:s.id,children:[s.full_name," - ",s.grade_level?`Grade ${s.grade_level}`:"No Grade"]},s.id))]})]})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(d,{variant:"all"===z?"default":"outline",onClick:()=>G("all"),className:"rounded-full",children:"All Categories"}),F.map(s=>e.jsxs(d,{variant:z===s.id?"default":"outline",onClick:()=>G(s.id),className:"rounded-full",children:[e.jsx("span",{className:"mr-2",children:s.icon}),s.title]},s.id))]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs(d,{onClick:()=>{F.forEach(e=>{e.items.forEach(e=>{I.includes(e.id)||L(s=>[...s,e.id])})}),$({title:"Amazing! All accommodations added! ğŸš€",description:"You've created a comprehensive plan for your child"})},variant:"secondary",size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add All Accommodations"]}),e.jsxs(u,{variant:"secondary",className:"px-3 py-1 bg-green-100 text-green-700",children:[I.length," accommodations selected"]})]}),e.jsx("div",{className:"grid gap-6",children:O.map(s=>e.jsxs(r,{className:"bg-gradient-card border-0",children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[s.icon,s.title]}),e.jsx(m,{children:s.description})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Accommodations for Your Child"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.items.map(s=>e.jsxs("div",{className:"flex flex-col gap-3 p-4 rounded-lg bg-surface border border-border hover:border-primary/20 transition-colors",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-medium text-sm",children:s.title}),s.recommended&&e.jsx(u,{variant:"secondary",className:"text-xs bg-amber-100 text-amber-700",children:"â­ Recommended"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),s.parentTip&&e.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-2 rounded",children:["ğŸ’¡ Parent Tip: ",s.parentTip]})]}),e.jsx(d,{onClick:()=>(e=>{if(!I.includes(e)){L(s=>[...s,e]);const s=F.flatMap(e=>e.items).find(s=>s.id===e);$({title:"Accommodation Added! ğŸ‰",description:`${s?.title} has been added to your plan`})}})(s.id),disabled:I.includes(s.id),size:"sm",variant:I.includes(s.id)?"secondary":"default",className:"w-full","data-testid":`button-add-accommodation-${s.id}`,children:I.includes(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Added to Plan"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add to Plan"]})})]},s.id))})]})})]},s.id))}),I.length>0&&e.jsxs(r,{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white border-0",children:[e.jsxs(c,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Your Child's Accommodation Plan (",I.length," accommodations)"]}),e.jsx(m,{className:"text-white/80",children:"Review and manage your selected accommodations"})]}),e.jsx(o,{children:e.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:I.map(s=>{const i=F.flatMap(e=>e.items).find(e=>e.id===s);return i?e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/10 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:i.title})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{return e=s,void L(s=>s.filter(s=>s!==e));var e},className:"text-white/60 hover:text-white hover:bg-white/10",children:"Remove"})]},s):null})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(d,{variant:"default",size:"lg",className:"w-full",disabled:0===I.length,onClick:async()=>{if(0!==I.length)try{const e=I.map(e=>{const s=F.flatMap(e=>e.items).find(s=>s.id===e);return s?{id:s.id,title:s.title,description:s.description,category:F.find(s=>s.items.some(s=>s.id===e))?.title||"Unknown",parentTip:s.parentTip}:null}).filter(Boolean),s=B&&"general"!==B&&D?.find(e=>e.id===B)?.full_name||"General",i=`${s} - Autism Accommodations Plan`,a={studentId:B||null,studentName:s,accommodations:e,createdDate:(new Date).toISOString(),createdBy:"parent",categories:F.map(e=>({id:e.id,title:e.title,description:e.description}))};await p("POST","/api/documents",{title:i,description:`Comprehensive autism accommodation plan for ${s} created on ${(new Date).toLocaleDateString()}`,file_name:`${i}.json`,file_path:`vault/accommodations/${Date.now()}-autism-accommodations`,file_type:"application/json",file_size:new Blob([JSON.stringify(a,null,2)]).size,category:"Accommodation Plan",tags:["autism","accommodations","plan","parent"],content:JSON.stringify(a,null,2),student_id:"general"===B?null:B});$({title:"Saved to Your Vault! ğŸ’¾",description:"Your accommodation plan is safely stored and ready to share"})}catch(e){console.error("Error saving to vault:",e),$({title:"Error",description:"Failed to save to vault. Please try again.",variant:"destructive"})}else $({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"})},children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Save to My Vault"]}),e.jsxs(d,{variant:"hero",size:"lg",className:"w-full",disabled:0===I.length,onClick:async()=>{if(0!==I.length)try{const e=await p("POST","/api/autism_accommodations/generate-iep",{accommodation_ids:I,student_id:"general"===B?null:B,format:"formal"}),s=await e.json(),i=new Blob([s.iep_language],{type:"text/plain"}),a=URL.createObjectURL(i),t=document.createElement("a");t.href=a,t.download=`${B?D?.find(e=>e.id===B)?.full_name||"Student":"General"}-autism-accommodations-${(new Date).toISOString().split("T")[0]}.txt`,t.click(),URL.revokeObjectURL(a),$({title:"IEP Language Generated! ğŸ“",description:"Ready-to-use IEP language has been downloaded"})}catch(e){console.error("Error generating IEP language:",e),$({title:"Error",description:"Failed to generate IEP language. Please try again.",variant:"destructive"})}else $({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"})},"data-testid":"button-generate-iep",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Download IEP Language"]}),e.jsxs(d,{variant:"outline",size:"lg",className:"w-full",disabled:0===I.length,onClick:async()=>{if(0!==I.length)try{const e=await p("POST","/api/autism_accommodations/preview",{accommodation_ids:I,student_id:"general"===B?null:B,template_type:"iep"}),s=await e.json();console.log("Preview content:",s.preview),$({title:"Preview Generated! ğŸ‘€",description:"Your accommodation plan preview is ready to view"})}catch(e){console.error("Error generating preview:",e),$({title:"Error",description:"Failed to generate preview. Please try again.",variant:"destructive"})}else $({title:"No accommodations selected",description:"Please add some accommodations first",variant:"destructive"})},"data-testid":"button-preview-document",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Preview Plan"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(d,{asChild:!0,variant:"secondary",size:"lg",className:"min-w-48",children:e.jsxs(i,{to:"/upsell/hero-plan",children:["Get Expert Review",e.jsx(P,{className:"h-4 w-4 ml-2"})]})})})]}),e.jsxs(r,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-0",children:[e.jsx(c,{children:e.jsxs(l,{className:"text-lg flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-primary"}),"Tips for Parent Advocates"]})}),e.jsxs(o,{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"ğŸ’ª"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Start with recommended accommodations"})," - they're based on research and best practices for children with autism"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"ğŸ¯"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Focus on your child's specific needs"})," - consider their sensory preferences, communication style, and learning strengths"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"ğŸ“‹"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Be specific in IEP meetings"})," - include details about frequency, duration, and settings for each accommodation"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"ğŸ¤"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Collaborate with teachers"})," - share what works at home and ask for their observations and suggestions"]})]})]})]})]})})]})};export{B as default};
