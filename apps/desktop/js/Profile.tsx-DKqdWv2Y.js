import{j as e}from"./chunk-DsWtD-um.js";import{a,B as t,u as s}from"../assets/index-4xq_U8Za.js";import{B as r}from"./chunk-dWvI_tCU.js";import{r as l,d as i}from"./chunk--CdJ9rTh.js";import{A as n,b as d,a as c}from"./chunk-XC33JK1E.js";import{D as o,e as x,a as m,b as g,c as h}from"./chunk-DtPYXc3G.js";import{u}from"./chunk-W7T4nVof.js";import{Q as p,v as j,aL as b,aU as f,X as y,i as N,r as v,Z as w,a2 as k,o as P,a4 as C,e as U,aa as A,u as F,Y as S}from"./chunk-CIO6T0Sb.js";import{M as I,C as $,P as z}from"./chunk-CQUO3auH.js";import{S as T}from"./chunk-BzrD7sQf.js";import{P as B}from"./chunk-Cxh3gN0V.js";import"./chunk-DiCKXT8z.js";function L({currentImageUrl:s,fallbackText:r,onImageUpdate:i,size:N="lg",editable:v=!0,className:w=""}){const[k,P]=l.useState(!1),[C,U]=l.useState(null),[A,F]=l.useState(!1),{toast:S}=a(),{captureFromCamera:I,captureFromGallery:$,convertToFile:z,isCapturing:T,isNative:B}=u(),L={sm:{avatar:"h-12 w-12",text:"text-sm"},md:{avatar:"h-16 w-16",text:"text-base"},lg:{avatar:"h-24 w-24",text:"text-lg"},xl:{avatar:"h-32 w-32",text:"text-xl"}},M=C||s,R=async e=>{F(!0);try{const a=new FileReader;a.onload=async()=>{const e=a.result;await new Promise(e=>setTimeout(e,1e3));const t=e;U(t),i?.(t),S({title:"Photo Updated",description:"Your profile photo has been updated successfully."}),P(!1)},a.readAsDataURL(e)}catch(a){console.error("Upload error:",a),S({title:"Upload Failed",description:a.message||"Failed to upload photo. Please try again.",variant:"destructive"})}finally{F(!1)}};return e.jsxs("div",{className:`relative ${w}`,children:[e.jsxs(n,{className:`${L[N].avatar} ${v?"cursor-pointer":""}`,children:[e.jsx(d,{src:M,alt:"Profile"}),e.jsx(c,{className:`${L[N].text} bg-blue-500 text-white`,children:r})]}),v&&e.jsxs(o,{open:k,onOpenChange:P,children:[e.jsx(x,{asChild:!0,children:e.jsx(t,{size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full bg-blue-600 hover:bg-blue-700 text-white p-0","data-testid":"button-edit-avatar",children:e.jsx(p,{className:"h-4 w-4"})})}),e.jsxs(m,{className:"sm:max-w-md",children:[e.jsx(g,{children:e.jsx(h,{children:"Update Profile Photo"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(n,{className:"h-32 w-32",children:[e.jsx(d,{src:M,alt:"Profile preview"}),e.jsx(c,{className:"text-2xl bg-blue-500 text-white",children:r})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-center",children:"Choose a photo"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs(t,{variant:"outline",onClick:async()=>{const e=await I();if(e){const a=z(e);await R(a)}},disabled:T||A,className:"flex items-center gap-2 justify-center","data-testid":"button-camera-photo",children:[T?e.jsx(j,{className:"h-4 w-4 animate-spin"}):e.jsx(p,{className:"h-4 w-4"}),B?"Take Photo":"Camera*"]}),e.jsxs(t,{variant:"outline",onClick:async()=>{const e=await $();if(e){const a=z(e);await R(a)}},disabled:T||A,className:"flex items-center gap-2 justify-center","data-testid":"button-gallery-photo",children:[T?e.jsx(j,{className:"h-4 w-4 animate-spin"}):e.jsx(b,{className:"h-4 w-4"}),B?"Choose from Gallery":"Browse Files*"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files?.[0];a&&(a.type.startsWith("image/")?a.size>5242880?S({title:"File Too Large",description:"Image size must be less than 5MB.",variant:"destructive"}):R(a):S({title:"Invalid File",description:"Please select an image file.",variant:"destructive"}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","data-testid":"input-file-photo"}),e.jsxs(t,{variant:"outline",disabled:A,className:"w-full flex items-center gap-2 justify-center",children:[A?e.jsx(j,{className:"h-4 w-4 animate-spin"}):e.jsx(f,{className:"h-4 w-4"}),A?"Uploading...":"Upload File"]})]})]}),!B&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"* Full camera support available in mobile app"}),M&&e.jsx("div",{className:"pt-3 border-t",children:e.jsxs(t,{variant:"outline",onClick:()=>{U(null),i?.(""),S({title:"Photo Removed",description:"Your profile photo has been removed."}),P(!1)},disabled:A,className:"w-full flex items-center gap-2 justify-center text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":"button-remove-photo",children:[e.jsx(y,{className:"h-4 w-4"}),"Remove Photo"]})})]}),A&&e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading photo..."})})]})]})]})]})}function M(){const{user:l,signOut:n}=s(),d=i(),{toast:c}=a();if(!l)return e.jsx(I,{children:e.jsx(T,{children:e.jsx($,{padding:"md",className:"h-screen flex items-center justify-center",children:e.jsx(z,{variant:"glass",className:"p-8 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900 dark:to-blue-800 rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading profile..."})]})})})})});const o="hero"===(x=l.subscriptionPlan)?{gradient:"from-purple-500 to-purple-600",bg:"bg-purple-100 dark:bg-purple-900",text:"text-purple-700 dark:text-purple-300",badge:"bg-gradient-to-r from-purple-500 to-purple-600 text-white"}:"pro"===x?{gradient:"from-blue-500 to-blue-600",bg:"bg-blue-100 dark:bg-blue-900",text:"text-blue-700 dark:text-blue-300",badge:"bg-gradient-to-r from-blue-500 to-blue-600 text-white"}:{gradient:"from-gray-400 to-gray-500",bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-300",badge:"bg-gradient-to-r from-gray-400 to-gray-500 text-white"};var x,m,g,h;return e.jsx(I,{children:e.jsxs(T,{children:[e.jsx(B,{title:"My Profile",subtitle:"Account settings and information",rightAction:e.jsx(t,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full",onClick:()=>{const e="advocate"===l.role?"/advocate/settings":"/parent/settings";d(e)},"data-testid":"header-settings-button",children:e.jsx(N,{className:"h-5 w-5"})})}),e.jsxs($,{padding:"md",className:"space-y-6 pb-32",children:[e.jsxs(z,{variant:"gradient",className:"p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-50/50 to-transparent dark:from-blue-950/20 rounded-full transform translate-x-16 -translate-y-16"}),e.jsxs("div",{className:"relative z-10 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(L,{currentImageUrl:l.profileImageUrl||"",fallbackText:(g=l.firstName||"",h=l.lastName||"",`${g?.[0]||""}${h?.[0]||""}`.toUpperCase()||l.email?.[0]?.toUpperCase()||"U"),size:"lg",onImageUpdate:e=>{console.log("Profile image updated:",e)},className:"mx-auto border-4 border-white/20 shadow-2xl"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.firstName&&l.lastName?`${l.firstName} ${l.lastName}`:l.email?.split("@")[0]||"User"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:(m=l.role,"parent"===m?"Parent":"Advocate")})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(r,{className:`${o.badge} border-0 px-4 py-2 text-sm font-semibold rounded-full`,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),(e=>e&&"free"!==e?"hero"===e?"Hero Plan":"pro"===e?"Pro Plan":`${e.charAt(0).toUpperCase()+e.slice(1)} Plan`:"Free Member")(l.subscriptionPlan)]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-green-600 dark:text-green-400 text-sm",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"AI-Powered"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-600 dark:text-blue-400 text-sm",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:"Secure"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(t,{className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white border-0 rounded-xl h-12 font-semibold shadow-lg hover:shadow-xl transition-all duration-200",onClick:()=>{const e="advocate"===l.role?"/advocate/settings":"/parent/settings";d(e)},"data-testid":"button-edit-profile",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]})]}),e.jsxs(z,{variant:"elevated",className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Contact Information"}),e.jsx(P,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx(C,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:e.jsx(U,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.phoneNumber||e.jsx("span",{className:"italic text-gray-500 dark:text-gray-400",children:"No phone number added"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center",children:e.jsx(A,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Member Since"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(l.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]})]})]}),e.jsxs(z,{variant:"elevated",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Account Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(t,{onClick:()=>{const e="advocate"===l.role?"/advocate/settings":"/parent/settings";d(e)},variant:"outline",className:"w-full h-12 justify-between rounded-xl border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800","data-testid":"profile-settings-button",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Account Settings"})]}),e.jsx(P,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs(t,{onClick:()=>d("advocate"===l.role?"/advocate/pricing":"/parent/pricing"),variant:"outline",className:"w-full h-12 justify-between rounded-xl border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800","data-testid":"profile-billing-button",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Billing & Plans"})]}),e.jsx(P,{className:"h-5 w-5 text-gray-400"})]}),e.jsxs(t,{onClick:async()=>{try{await n(),c({title:"Signed out successfully",description:"You have been logged out of your account."}),d("/auth")}catch(e){c({title:"Error signing out",description:"There was a problem signing you out. Please try again.",variant:"destructive"})}},variant:"outline",className:"w-full h-12 justify-between rounded-xl border-orange-200 dark:border-orange-800 hover:bg-orange-50 dark:hover:bg-orange-950 text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300","data-testid":"profile-signout-button",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Sign Out"})]}),e.jsx(P,{className:"h-5 w-5"})]})]})]}),e.jsxs(z,{variant:"glass",className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Recent Activity"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center mx-auto mb-4",children:e.jsx(S,{className:"h-8 w-8 text-gray-400 dark:text-gray-500"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No recent activity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 max-w-xs mx-auto leading-relaxed",children:"Your activity history will appear here as you use the platform"})]})]})]})]})})}export{M as default};
