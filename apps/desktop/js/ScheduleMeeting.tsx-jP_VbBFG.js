import{j as e}from"./chunk-DsWtD-um.js";import{d as t,r as s}from"./chunk--CdJ9rTh.js";import{a,D as i,B as l,C as n,d,e as r,h as c,L as o,I as h}from"../assets/index-BuUqvl4a.js";import{S as m,a as u,b as x,c as j,d as g}from"./chunk-CqIUznKi.js";import{T as p}from"./chunk-CKRZgYDG.js";import{a1 as v,aa as y}from"./chunk-CIO6T0Sb.js";import"./chunk-DiCKXT8z.js";function f(){const f=t(),{toast:N}=a(),[_,S]=s.useState(!1),[w,b]=s.useState({title:"",meeting_type:"",scheduled_date:"",start_time:"",end_time:"",location:"",notes:"",client_id:""}),C=(e,t)=>{b(s=>({...s,[e]:t}))};return e.jsx(i,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>f("/advocate/schedule"),"data-testid":"button-back",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Back to Schedule"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Schedule Meeting"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule a new meeting with a family"})]})]}),e.jsx("div",{className:"max-w-2xl",children:e.jsxs(n,{children:[e.jsx(d,{children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Meeting Details"]})}),e.jsx(c,{children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),S(!0);try{const e=localStorage.getItem("authToken"),t=await fetch("/api/meetings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""},credentials:"include",body:JSON.stringify({...w,status:"scheduled"})});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to schedule meeting")}N({title:"Meeting Scheduled",description:"Your meeting has been successfully scheduled."}),f("/advocate/schedule")}catch(t){console.error("Error scheduling meeting:",t),N({title:"Schedule Failed",description:t.message||"Failed to schedule meeting. Please try again.",variant:"destructive"})}finally{S(!1)}},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Meeting Title"}),e.jsx(h,{id:"title",value:w.title,onChange:e=>C("title",e.target.value),placeholder:"e.g., IEP Review Meeting",required:!0,"data-testid":"input-title"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"meeting_type",children:"Meeting Type"}),e.jsxs(m,{value:w.meeting_type,onValueChange:e=>C("meeting_type",e),children:[e.jsx(u,{"data-testid":"select-meeting-type",children:e.jsx(x,{placeholder:"Select type"})}),e.jsxs(j,{children:[e.jsx(g,{value:"iep_review",children:"IEP Review"}),e.jsx(g,{value:"consultation",children:"Consultation"}),e.jsx(g,{value:"504_meeting",children:"504 Meeting"}),e.jsx(g,{value:"progress_review",children:"Progress Review"}),e.jsx(g,{value:"initial_meeting",children:"Initial Meeting"}),e.jsx(g,{value:"strategy_session",children:"Strategy Session"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"scheduled_date",children:"Date"}),e.jsx(h,{id:"scheduled_date",type:"date",value:w.scheduled_date,onChange:e=>C("scheduled_date",e.target.value),required:!0,"data-testid":"input-date"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"start_time",children:"Start Time"}),e.jsx(h,{id:"start_time",type:"time",value:w.start_time,onChange:e=>C("start_time",e.target.value),required:!0,"data-testid":"input-start-time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"end_time",children:"End Time"}),e.jsx(h,{id:"end_time",type:"time",value:w.end_time,onChange:e=>C("end_time",e.target.value),required:!0,"data-testid":"input-end-time"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"location",children:"Location"}),e.jsx(h,{id:"location",value:w.location,onChange:e=>C("location",e.target.value),placeholder:"e.g., School conference room, Zoom call, etc.","data-testid":"input-location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"notes",children:"Meeting Notes"}),e.jsx(p,{id:"notes",value:w.notes,onChange:e=>C("notes",e.target.value),placeholder:"Add any preparation notes or agenda items...",rows:3,"data-testid":"textarea-notes"})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx(l,{type:"submit",disabled:_,className:"flex-1","data-testid":"button-schedule",children:_?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full"}),"Scheduling..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),"Schedule Meeting"]})}),e.jsx(l,{type:"button",variant:"outline",onClick:()=>f("/advocate/schedule"),"data-testid":"button-cancel",children:"Cancel"})]})]})})]})})]})})}export{f as default};
