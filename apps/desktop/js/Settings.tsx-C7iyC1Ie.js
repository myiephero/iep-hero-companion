import{j as e}from"./chunk-DsWtD-um.js";import{a as s,M as a,B as t,L as r,u as i,I as d}from"../assets/index-BuUqvl4a.js";import{r as n,d as l}from"./chunk--CdJ9rTh.js";import{S as c}from"./chunk-Bz6fRHd_.js";import{B as o}from"./chunk-DjC-ACAS.js";import{P as m,M as x,C as h}from"./chunk-CM5WrtKZ.js";import"./chunk-BFEROTJb.js";import{V as g,bj as u,aa as p,j as y,ab as f,M as j,Z as b,C as N,s as v,a2 as k,O as w,y as C,a5 as P,N as S,i as A,k as E,ad as F,bh as U,u as M,as as R}from"./chunk-CIO6T0Sb.js";import{S as T}from"./chunk-DQvWbN_r.js";import{P as I}from"./chunk-C7xX8oBe.js";import"./chunk-DiCKXT8z.js";const B={iepMeetingReminders:!0,documentAnalysisComplete:!0,newMessages:!0,goalProgressUpdates:!0,subscriptionUpdates:!0,weeklyReports:!1,urgentAlerts:!0};function O(){const{toast:i}=s(),{isSupported:d,permissionState:l,isRegistered:x,requestPermission:h,unregisterFromNotifications:A}=a(),[E,F]=n.useState(B),[U,M]=n.useState(!1),[R,T]=n.useState(!1);n.useEffect(()=>{I()},[]);const I=async()=>{M(!0);try{const e=localStorage.getItem("authToken"),s=await fetch("/api/notifications/preferences",{headers:{...e&&{Authorization:`Bearer ${e}`}},credentials:"include"});if(s.ok){const e=await s.json();e.preferences&&F({...B,...e.preferences})}}catch(e){console.error("Error loading notification preferences:",e)}finally{M(!1)}},O=(e,s)=>{F(a=>({...a,[e]:s}))},z=d?l.granted&&x?{icon:e.jsx(C,{className:"h-4 w-4"}),text:"Enabled",description:"Push notifications are active",variant:"default"}:l.denied?{icon:e.jsx(P,{className:"h-4 w-4"}),text:"Disabled",description:"Permission denied. Enable in device settings.",variant:"destructive"}:{icon:e.jsx(S,{className:"h-4 w-4"}),text:"Not Set",description:"Tap to enable push notifications",variant:"outline"}:{icon:e.jsx(w,{className:"h-4 w-4"}),text:"Web Browser",description:"Push notifications are only available on mobile devices",variant:"secondary"};return e.jsxs("div",{className:"space-y-6","data-testid":"notification-settings",children:[e.jsx(m,{variant:"elevated",className:"p-6",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 flex items-center justify-center",children:e.jsx(g,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified about important updates"})]})]}),e.jsxs(o,{variant:z.variant,className:"flex items-center gap-1.5 px-3 py-1.5",children:[z.icon,z.text]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:z.description}),d&&e.jsxs("div",{className:"flex gap-3",children:[!l.granted&&e.jsxs(t,{onClick:async()=>{await h()&&i({title:"Notifications Enabled",description:"You'll now receive important updates on your mobile device."})},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl h-11 px-6 shadow-lg shadow-blue-600/25","data-testid":"button-enable-notifications",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Enable Notifications"]}),l.granted&&e.jsxs(t,{onClick:async()=>{await A()},variant:"outline",className:"h-11 rounded-xl border-gray-200 dark:border-gray-800","data-testid":"button-disable-notifications",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Disable Notifications"]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{variant:"glass",className:"p-6",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 flex items-center justify-center",children:e.jsx(p,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"IEP & Education"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Academic progress and meetings"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-950/50 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"iep-meetings",className:"font-medium text-gray-900 dark:text-gray-100",children:"IEP Meeting Reminders"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified before scheduled meetings"})]})]}),e.jsx(c,{id:"iep-meetings",checked:E.iepMeetingReminders,onCheckedChange:e=>O("iepMeetingReminders",e),"data-testid":"switch-iep-reminders"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-950/50 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"document-analysis",className:"font-medium text-gray-900 dark:text-gray-100",children:"Document Analysis Complete"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"When AI analysis is finished"})]})]}),e.jsx(c,{id:"document-analysis",checked:E.documentAnalysisComplete,onCheckedChange:e=>O("documentAnalysisComplete",e),"data-testid":"switch-document-analysis"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-950/50 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"goal-progress",className:"font-medium text-gray-900 dark:text-gray-100",children:"Goal Progress Updates"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Updates on goal achievements"})]})]}),e.jsx(c,{id:"goal-progress",checked:E.goalProgressUpdates,onCheckedChange:e=>O("goalProgressUpdates",e),"data-testid":"switch-goal-progress"})]})]})]})}),e.jsx(m,{variant:"glass",className:"p-6",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 flex items-center justify-center",children:e.jsx(j,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Communication"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Messages and urgent alerts"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-950/50 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"new-messages",className:"font-medium text-gray-900 dark:text-gray-100",children:"New Messages"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Messages from advocates and team members"})]})]}),e.jsx(c,{id:"new-messages",checked:E.newMessages,onCheckedChange:e=>O("newMessages",e),"data-testid":"switch-new-messages"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-950/50 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"urgent-alerts",className:"font-medium text-gray-900 dark:text-gray-100",children:"Urgent Alerts"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"High-priority notifications"})]})]}),e.jsx(c,{id:"urgent-alerts",checked:E.urgentAlerts,onCheckedChange:e=>O("urgentAlerts",e),"data-testid":"switch-urgent-alerts"})]})]})]})}),e.jsx(m,{variant:"glass",className:"p-6",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900 flex items-center justify-center",children:e.jsx(N,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Account & Reports"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Billing and progress reports"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-950/50 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"subscription-updates",className:"font-medium text-gray-900 dark:text-gray-100",children:"Subscription Updates"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Billing and plan changes"})]})]}),e.jsx(c,{id:"subscription-updates",checked:E.subscriptionUpdates,onCheckedChange:e=>O("subscriptionUpdates",e),"data-testid":"switch-subscription-updates"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/50 dark:bg-gray-950/50 border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"weekly-reports",className:"font-medium text-gray-900 dark:text-gray-100",children:"Weekly Progress Reports"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Summary of weekly progress"})]})]}),e.jsx(c,{id:"weekly-reports",checked:E.weeklyReports,onCheckedChange:e=>O("weeklyReports",e),"data-testid":"switch-weekly-reports"})]})]})]})})]}),e.jsx(m,{variant:"elevated",className:"p-6",children:e.jsxs(t,{onClick:async()=>{T(!0);try{const e=localStorage.getItem("authToken");if(!(await fetch("/api/notifications/preferences",{method:"PUT",headers:{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}},credentials:"include",body:JSON.stringify({preferences:E})})).ok)throw new Error("Failed to save preferences");i({title:"Preferences Saved",description:"Your notification preferences have been updated successfully."})}catch(e){i({title:"Error",description:"Failed to save notification preferences. Please try again.",variant:"destructive"})}finally{T(!1)}},disabled:R,className:"w-full h-12 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-xl font-medium text-base shadow-lg shadow-green-600/25 active:scale-[0.98] transition-all duration-150","data-testid":"button-save-preferences",children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),R?"Saving...":"Save Preferences"]})})]})}function z(){const{user:a,refreshUser:c,signOut:o}=i(),{toast:u}=s(),p=l(),[y,f]=n.useState(!1),[j,b]=n.useState({firstName:"",lastName:"",email:"",phoneNumber:""});n.useEffect(()=>{a&&b({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phoneNumber:a.phoneNumber||""})},[a]);return e.jsx(x,{children:e.jsxs(T,{children:[e.jsx(I,{title:"Account Settings",subtitle:"Manage your profile and preferences",rightAction:e.jsx(t,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full",children:e.jsx(A,{className:"h-5 w-5"})})}),e.jsxs(h,{padding:"md",className:"space-y-8 pb-32",children:[e.jsx(m,{variant:"gradient",className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 flex items-center justify-center",children:e.jsx(E,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Profile Information"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Update your personal details"})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),e.jsx(d,{id:"firstName",value:j.firstName,onChange:e=>b({...j,firstName:e.target.value}),placeholder:"Enter first name",className:"h-12 rounded-xl border-gray-200 dark:border-gray-800 focus:border-blue-500 dark:focus:border-blue-400","data-testid":"input-firstName"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),e.jsx(d,{id:"lastName",value:j.lastName,onChange:e=>b({...j,lastName:e.target.value}),placeholder:"Enter last name",className:"h-12 rounded-xl border-gray-200 dark:border-gray-800 focus:border-blue-500 dark:focus:border-blue-400","data-testid":"input-lastName"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsx(d,{id:"email",type:"email",value:j.email,onChange:e=>b({...j,email:e.target.value}),placeholder:"Enter email address",className:"h-12 rounded-xl border-gray-200 dark:border-gray-800 focus:border-blue-500 dark:focus:border-blue-400","data-testid":"input-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"phoneNumber",className:"text-sm font-medium",children:"Phone Number"}),e.jsx(d,{id:"phoneNumber",type:"tel",value:j.phoneNumber,onChange:e=>b({...j,phoneNumber:e.target.value}),placeholder:"Enter phone number",className:"h-12 rounded-xl border-gray-200 dark:border-gray-800 focus:border-blue-500 dark:focus:border-blue-400","data-testid":"input-phoneNumber"})]}),e.jsxs(t,{onClick:async()=>{f(!0);try{const e=localStorage.getItem("authToken");if(!(await fetch("/api/auth/update-profile",{method:"PUT",headers:{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}},credentials:"include",body:JSON.stringify(j)})).ok)throw new Error("Failed to update profile");u({title:"Profile Updated",description:"Your profile information has been saved successfully."}),await c()}catch(e){u({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{f(!1)}},disabled:y,className:"w-full h-12 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl font-medium text-base shadow-lg shadow-blue-600/25 active:scale-[0.98] transition-all duration-150","data-testid":"button-save-profile",children:[e.jsx(F,{className:"h-5 w-5 mr-2"}),y?"Saving...":"Save Changes"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 flex items-center justify-center",children:e.jsx(g,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your notification preferences"})]})]}),e.jsx(O,{})]}),e.jsx(m,{variant:"glass",className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900 flex items-center justify-center",children:e.jsx(k,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Privacy & Security"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage account security settings"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(t,{variant:"outline",className:"w-full h-12 rounded-xl border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 justify-start text-left","data-testid":"button-change-password",children:[e.jsx(U,{className:"h-5 w-5 mr-3 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Change Password"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Update your account password"})]})]}),e.jsxs(t,{variant:"outline",className:"w-full h-12 rounded-xl border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 justify-start text-left","data-testid":"button-two-factor",children:[e.jsx(k,{className:"h-5 w-5 mr-3 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add extra security to your account"})]})]}),e.jsxs(t,{onClick:async()=>{try{await o(),u({title:"Signed out successfully",description:"You have been logged out of your account."}),p("/auth")}catch(e){u({title:"Error signing out",description:"There was a problem signing you out. Please try again.",variant:"destructive"})}},variant:"outline",className:"w-full h-12 rounded-xl border-orange-200 dark:border-orange-800 hover:bg-orange-50 dark:hover:bg-orange-950 text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 justify-start text-left","data-testid":"button-sign-out",children:[e.jsx(M,{className:"h-5 w-5 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Sign Out"}),e.jsx("div",{className:"text-sm text-orange-500 dark:text-orange-400",children:"Log out of your account"})]})]}),e.jsxs(t,{variant:"outline",className:"w-full h-12 rounded-xl border-red-200 dark:border-red-800 hover:bg-red-50 dark:hover:bg-red-950 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 justify-start text-left","data-testid":"button-delete-account",children:[e.jsx(R,{className:"h-5 w-5 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Delete Account"}),e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:"Permanently remove your account"})]})]})]})]})})]})]})})}export{z as default};
