import{j as e}from"./chunk-DsWtD-um.js";import{d as a,r as s,L as t}from"./chunk--CdJ9rTh.js";import{a as i,u as r,r as n,t as l,B as c,v as o,w as d,C as m,h as u,d as p,e as h,f as x,L as g,I as y}from"../assets/index-DhCC2x2k.js";import{B as v}from"./chunk-hdVtyTqo.js";import{T as j}from"./chunk-DWdWJmEp.js";import{S as f,a as N,b as w,c as b,d as C}from"./chunk-C5NgAHBI.js";import{P as S}from"./chunk-Dc9X9-8W.js";import{u as E}from"./chunk-DiCKXT8z.js";import{A as L}from"./chunk-BlPDfEE5.js";import{aQ as k,i as P,av as q,b3 as R,b4 as A,am as D,x as M,b5 as I,aN as T,ap as F,y as G,S as H,z as O,a2 as W,f as V,b6 as _}from"./chunk-CIO6T0Sb.js";const U=()=>{const{toast:U}=i(),{profile:Y}=r();a();const $="advocate"===Y?.role,[K,z]=s.useState(1),[B,J]=s.useState(""),[Q,X]=s.useState(""),[Z,ee]=s.useState(!1),[ae,se]=s.useState(null),[te,ie]=s.useState(""),[re,ne]=s.useState({studentName:"",studentGrade:"",schoolName:"",schoolDistrict:"",principalName:"",parentName:"",parentPhone:"",parentEmail:""}),[le,ce]=s.useState(null);s.useEffect(()=>{const e=new URLSearchParams(window.location.search),a=e.get("context"),s=e.get("analysisType"),t=e.get("fileName"),i=e.get("timestamp"),r=e.get("template");if(r)return J(r),void U({title:"Template Pre-selected",description:"Template loaded from your previous page."});if("analysis"===a&&s){ce({analysisType:s,fileName:t||"",timestamp:i||""});let e="";switch(s.toLowerCase()){case"iep_quality":case"goal_analysis":case"meeting_prep":default:e="iep-meeting-request";break;case"compliance":e="prior-written-notice";break;case"accommodation":e="accommodation-request"}J(e),U({title:"Analysis Context Loaded",description:`Pre-selected template based on your ${s.replace("_"," ")} analysis.`})}},[U]);const oe=$?[{id:"professional-evaluation-request",title:"Professional Evaluation Request",description:"Formal evaluation request with legal citations and IDEA compliance requirements",category:"Evaluation",urgency:"High",timeframe:"60 days",complexity:"Complex"},{id:"comprehensive-service-request",title:"Comprehensive Service Request",description:"Detailed service request with FAPE justification and LRE analysis",category:"Services",urgency:"High",timeframe:"30 days",complexity:"Complex"},{id:"placement-advocacy",title:"Placement Advocacy Letter",description:"Professional placement recommendation with legal precedent citations",category:"Placement",urgency:"High",timeframe:"immediate",complexity:"Complex"},{id:"case-summary",title:"Case Summary & Analysis",description:"Comprehensive case overview with compliance assessment",category:"Professional",urgency:"Standard",timeframe:"5 days",complexity:"Complex"},{id:"legal-notice",title:"Legal Notice & Demand",description:"Formal legal notice with compliance requirements and deadlines",category:"Legal",urgency:"Urgent",timeframe:"10 days",complexity:"Complex"},{id:"due-process-notice",title:"Due Process Hearing Notice",description:"Formal due process complaint filing with legal requirements",category:"Legal",urgency:"Urgent",timeframe:"2 years",complexity:"Complex"},{id:"expert-testimony",title:"Expert Opinion Letter",description:"Professional opinion for hearings with qualifications and analysis",category:"Legal",urgency:"High",timeframe:"14 days",complexity:"Complex"},{id:"compliance-review",title:"IEP Compliance Review",description:"Systematic review of IEP compliance with regulatory standards",category:"Professional",urgency:"Standard",timeframe:"30 days",complexity:"Complex"}]:[{id:"ferpa-request",title:"FERPA Records Request",description:"Request educational records under FERPA",category:"Records Access",urgency:"Standard",timeframe:"45 days",complexity:"Simple"},{id:"iep-meeting-request",title:"IEP Meeting Request",description:"Request an IEP team meeting",category:"Meeting Request",urgency:"High",timeframe:"30 days",complexity:"Medium"},{id:"evaluation-request",title:"Special Education Evaluation",description:"Request comprehensive evaluation",category:"Evaluation",urgency:"High",timeframe:"60 days",complexity:"Complex"},{id:"accommodation-request",title:"504 Accommodation Request",description:"Request 504 plan accommodations",category:"Accommodations",urgency:"Medium",timeframe:"30 days",complexity:"Medium"},{id:"placement-concern",title:"Placement Concern Letter",description:"Express concerns about current placement",category:"Advocacy",urgency:"High",timeframe:"15 days",complexity:"Complex"},{id:"prior-written-notice",title:"Prior Written Notice Request",description:"Request PWN for school decisions",category:"Legal Rights",urgency:"Standard",timeframe:"10 days",complexity:"Simple"},{id:"correction-request",title:"Educational Record Correction",description:"Request correction of inaccurate records",category:"Records Correction",urgency:"Standard",timeframe:"45 days",complexity:"Medium"}],de=new L,{data:me=[],isLoading:ue}=E({queryKey:["/api/students"],queryFn:()=>de.getStudents()}),pe=[{value:"AL",name:"Alabama"},{value:"AK",name:"Alaska"},{value:"AZ",name:"Arizona"},{value:"AR",name:"Arkansas"},{value:"CA",name:"California"},{value:"CO",name:"Colorado"},{value:"CT",name:"Connecticut"},{value:"DE",name:"Delaware"},{value:"DC",name:"District of Columbia"},{value:"FL",name:"Florida"},{value:"GA",name:"Georgia"},{value:"HI",name:"Hawaii"},{value:"ID",name:"Idaho"},{value:"IL",name:"Illinois"},{value:"IN",name:"Indiana"},{value:"IA",name:"Iowa"},{value:"KS",name:"Kansas"},{value:"KY",name:"Kentucky"},{value:"LA",name:"Louisiana"},{value:"ME",name:"Maine"},{value:"MD",name:"Maryland"},{value:"MA",name:"Massachusetts"},{value:"MI",name:"Michigan"},{value:"MN",name:"Minnesota"},{value:"MS",name:"Mississippi"},{value:"MO",name:"Missouri"},{value:"MT",name:"Montana"},{value:"NE",name:"Nebraska"},{value:"NV",name:"Nevada"},{value:"NH",name:"New Hampshire"},{value:"NJ",name:"New Jersey"},{value:"NM",name:"New Mexico"},{value:"NY",name:"New York"},{value:"NC",name:"North Carolina"},{value:"ND",name:"North Dakota"},{value:"OH",name:"Ohio"},{value:"OK",name:"Oklahoma"},{value:"OR",name:"Oregon"},{value:"PA",name:"Pennsylvania"},{value:"RI",name:"Rhode Island"},{value:"SC",name:"South Carolina"},{value:"SD",name:"South Dakota"},{value:"TN",name:"Tennessee"},{value:"TX",name:"Texas"},{value:"UT",name:"Utah"},{value:"VT",name:"Vermont"},{value:"VA",name:"Virginia"},{value:"WA",name:"Washington"},{value:"WV",name:"West Virginia"},{value:"WI",name:"Wisconsin"},{value:"WY",name:"Wyoming"}];console.log("ðŸ›ï¸ NEW FILE: All 50 states loaded:",pe.length),s.useEffect(()=>{Y&&!$&&ne(e=>({...e,parentName:Y?.firstName&&Y?.lastName?`${Y.firstName} ${Y.lastName}`:Y?.username||"",parentPhone:Y?.phone||"",parentEmail:Y?.email||""}))},[Y,$]),s.useEffect(()=>{ae&&ne(e=>({...e,studentName:ae.full_name||"",studentGrade:ae.grade_level||"",schoolName:ae.school_name||"",schoolDistrict:ae.district||"",principalName:"",parentName:e.parentName||(Y?.firstName&&Y?.lastName?`${Y.firstName} ${Y.lastName}`:Y?.username||""),parentPhone:e.parentPhone||Y?.phone||"",parentEmail:e.parentEmail||Y?.email||""}))},[ae,Y]);const he=()=>{navigator.clipboard.writeText(Q),U({title:"Copied to Clipboard",description:"Letter content has been copied to your clipboard."})},xe=()=>{const e=new Blob([Q],{type:"text/plain"}),a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=`${B}-${(new Date).toISOString().split("T")[0]}.txt`,s.click(),URL.revokeObjectURL(a),U({title:"Letter Downloaded",description:"Your letter has been downloaded as a text file."})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(k,{className:"h-8 w-8 text-primary"}),"ðŸ›ï¸ Smart Letter Generator - ALL 50 STATES",$&&e.jsx(v,{variant:"outline",className:"ml-2 bg-purple-50 text-purple-700 border-purple-200",children:"Professional"})]}),e.jsx("p",{className:"text-muted-foreground",children:$?"Generate professional advocacy letters with legal language, compliance features, and expert documentation":"Generate professional FERPA, IEP, and advocacy letters with AI assistance tailored for parents"})]}),e.jsxs(n,{children:[e.jsx(l,{asChild:!0,children:e.jsxs(c,{variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Tools & History",e.jsx(q,{className:"h-4 w-4 ml-2"})]})}),e.jsxs(o,{align:"end",className:"w-56",children:[e.jsxs(d,{onClick:()=>{U({title:"Letter History",description:"Viewing your letter history..."})},children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Letter History"]}),e.jsxs(d,{onClick:()=>{U({title:"My Templates",description:"Loading your custom templates..."})},children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"My Templates"]}),e.jsxs(d,{onClick:()=>{U({title:"Preferences",description:"Opening letter generation preferences..."})},children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Preferences"]})]})]})]}),e.jsx(m,{children:e.jsxs(u,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Step ",K," of 4"]})]}),e.jsx(S,{value:K/4*100,className:"mb-4"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{className:K>=1?"text-primary font-medium":"",children:"Select Template"}),e.jsx("span",{className:K>=2?"text-primary font-medium":"",children:"Fill Details"}),e.jsx("span",{className:K>=3?"text-primary font-medium":"",children:"Review & Edit"}),e.jsx("span",{className:K>=4?"text-primary font-medium":"",children:"Send & Track"})]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[e.jsxs("div",{className:"lg:col-span-3",children:[1===K&&e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Choose Letter Template"]}),e.jsx(x,{children:"Select the type of letter you need to generate"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:oe.map(a=>e.jsxs("div",{onClick:()=>J(a.id),className:"p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md "+(B===a.id?"border-primary bg-primary/5":"border-muted"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:a.title}),e.jsx(v,{variant:"High"===a.urgency?"destructive":"Medium"===a.urgency?"secondary":"outline",children:a.urgency})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:a.description}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Timeline: ",a.timeframe]}),e.jsxs("span",{className:"text-muted-foreground",children:["Complexity: ",a.complexity]})]})]},a.id))}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(c,{onClick:()=>z(2),disabled:!B,children:"Continue"})})]})]}),2===K&&e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Letter Details"]}),e.jsxs(x,{children:["Fill in the details for your ",oe.find(e=>e.id===B)?.title]})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"student-select",children:["Select Student ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(f,{value:ae?.id||"",onValueChange:e=>{const a=me.find(a=>a.id===e);se(a||null)},children:[e.jsx(N,{children:e.jsx(w,{placeholder:ue?"Loading students...":"Choose a student"})}),e.jsx(b,{children:me.map(a=>e.jsxs(C,{value:a.id||"",children:[a.full_name," - ",a.grade_level," (",a.school_name,")"]},a.id))})]})]}),e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"state-select",children:["State (",pe.length," options) ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(f,{value:te,onValueChange:ie,children:[e.jsx(N,{children:e.jsx(w,{placeholder:"Select state for specific regulations"})}),e.jsx(b,{children:pe.map(a=>e.jsx(C,{value:a.value,children:a.name},a.value))})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[{id:"studentName",label:"Student Name",type:"text",required:!0},{id:"studentGrade",label:"Grade",type:"text",required:!0},{id:"schoolName",label:"School Name",type:"text",required:!0},{id:"schoolDistrict",label:"School District",type:"text",required:!0},{id:"principalName",label:"Principal Name",type:"text",required:!1},{id:"parentName",label:"Parent/Guardian Name",type:"text",required:!0},{id:"parentPhone",label:"Phone Number",type:"tel",required:!0},{id:"parentEmail",label:"Email Address",type:"email",required:!0}].map(a=>e.jsxs("div",{children:[e.jsxs(g,{htmlFor:a.id,children:[a.label," ",a.required&&e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(y,{id:a.id,type:a.type,value:re[a.id]||"",onChange:e=>ne(s=>({...s,[a.id]:e.target.value})),required:a.required})]},a.id))}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(c,{variant:"outline",onClick:()=>z(1),children:"Back"}),e.jsx(c,{onClick:()=>(async()=>{ee(!0);try{if(!ae||!B||!te)return U({title:"Missing Information",description:"Please select a student, template, and state before generating.",variant:"destructive"}),void ee(!1);const e={student:ae,state:te,formData:re,template:B,role:Y?.role||"parent",analysisContext:le},a=await de.createActionDraft(le?.timestamp||`letter-${Date.now()}`,B,e);if(!a||!a.content)throw new Error("No content received from AI service");X(a.content),z(3),U({title:"Letter Generated Successfully",description:"Your AI-generated letter is ready for review."})}catch(e){console.error("Error generating letter:",e),U({title:"Generation Failed",description:"Failed to generate letter. Please try again.",variant:"destructive"})}finally{ee(!1)}})(),disabled:!ae||!te||Z,children:Z?"Generating...":"Generate Letter"})]})]})]}),3===K&&Q&&e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Review & Edit Letter"]}),e.jsx(x,{children:"Review your generated letter and make any necessary edits"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsx(j,{value:Q,onChange:e=>X(e.target.value),className:"min-h-[400px] font-mono text-sm",placeholder:"Your generated letter will appear here..."}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:he,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Copy"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:xe,children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Download"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>z(2),children:"Back to Edit"}),e.jsxs(c,{onClick:()=>z(4),children:["Finalize Letter",e.jsx(F,{className:"h-4 w-4 ml-2"})]})]})]})]})]}),4===K&&e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Send & Track"]}),e.jsx(x,{children:"Send your letter and track communication"})]}),e.jsxs(u,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[e.jsx(G,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Letter Ready!"}),e.jsxs("p",{className:"text-green-700 mb-4",children:["Your ",oe.find(e=>e.id===B)?.title," has been generated successfully."]}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsxs(c,{variant:"outline",onClick:he,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Copy Letter"]}),e.jsxs(c,{variant:"outline",onClick:xe,children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(c,{variant:"outline",onClick:()=>z(3),children:"Back to Review"}),e.jsx(c,{onClick:()=>{z(1),J(""),X(""),se(null),ie(""),ne({studentName:"",studentGrade:"",schoolName:"",schoolDistrict:"",principalName:"",parentName:"",parentPhone:"",parentEmail:""})},children:"Create New Letter"})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(m,{children:[e.jsx(p,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Legal Resources"]})}),e.jsxs(u,{className:"space-y-3",children:[e.jsxs(t,{to:"/parent/tools/idea-rights-guide",className:"flex items-center gap-2 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx(O,{className:"h-4 w-4"}),"IDEA Rights Guide"]}),e.jsxs(t,{to:"/ferpa-overview",className:"flex items-center gap-2 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx(W,{className:"h-4 w-4"}),"FERPA Overview"]}),e.jsxs(t,{to:"/parent/tools/plan-504-guide",className:"flex items-center gap-2 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx(V,{className:"h-4 w-4"}),"504 Plan Guide"]}),e.jsxs(t,{to:"/timeline-calculator",className:"flex items-center gap-2 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx(_,{className:"h-4 w-4"}),"Timeline Calculator"]})]})]})})]})]})};export{U as default};
