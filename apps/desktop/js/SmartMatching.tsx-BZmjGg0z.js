import{j as e}from"./chunk-DsWtD-um.js";import{r as s}from"./chunk--CdJ9rTh.js";import{u as a,a as t,C as i,h as l,d as r,e as n,f as c,B as d,L as o,I as m,m as h}from"../assets/index-BO9uTDme.js";import{B as x}from"./chunk-qxwVooB6.js";import{A as u,a as p}from"./chunk-DZposdJe.js";import{S as j,a as v,b as g,c as f,d as N}from"./chunk-BJKDjCst.js";import{P as y}from"./chunk-D0h9MBRh.js";import{T as w,a as b,b as S,c as _}from"./chunk-BxqMa7bc.js";import{D as k,e as C,a as F,b as A,c as M,d as P}from"./chunk-Bjjg2cVV.js";import{T as E}from"./chunk-BZjdROIr.js";import{C as z,a as T,b as q}from"./chunk-3lxlifzP.js";import{S as L}from"./chunk-DIZ_Na9Q.js";import{b as D,u as I,c as $}from"./chunk-DiCKXT8z.js";import{U as Y,B as O,Z as R,T as B,aO as K,aR as H,ae as U,M as Q,aC as G,au as V,av as W}from"./chunk-CIO6T0Sb.js";function J(){const{user:J}=a(),[Z,X]=s.useState(""),[ee,se]=s.useState("medium"),[ae,te]=s.useState([]),[ie,le]=s.useState("idle"),[re,ne]=s.useState("smart-match"),[ce,de]=s.useState(""),[oe,me]=s.useState("all"),[he,xe]=s.useState(null),[ue,pe]=s.useState(!1),[je,ve]=s.useState(""),[ge,fe]=s.useState(null),[Ne,ye]=s.useState(new Set),{toast:we}=t(),be=D(),Se="advocate"===J?.role,_e=J?.role||"parent",{data:ke=[],isLoading:Ce}=I({queryKey:["students"],queryFn:async()=>{const e=await h("GET","/api/students");return await e.json()},enabled:!Se}),{data:Fe=[],isLoading:Ae}=I({queryKey:["advocates"],queryFn:async()=>{const e=await h("GET","/api/advocates");return await e.json()},enabled:!Se}),{data:Me,isLoading:Pe}=I({queryKey:["match-proposals",_e],queryFn:async()=>{const e=Se?"/api/match/advocate-proposals":"/api/match",s=await h("GET",e);return await s.json()}}),Ee=Array.isArray(Me?.proposals)?Me.proposals:[],ze=Fe.filter(e=>{const s=e.full_name.toLowerCase().includes(ce.toLowerCase())||(e.bio||"").toLowerCase().includes(ce.toLowerCase())||(e.specializations||[]).some(e=>e.toLowerCase().includes(ce.toLowerCase())),a="all"===oe||(e.specializations||[]).includes(oe);return s&&a}),Te=$({mutationFn:async({student_id:e,urgency_level:s})=>(await h("POST","/api/match/auto-match",{student_id:e,max_matches:3,urgency_level:s})).json(),onSuccess:e=>{console.log("Match results:",e),te(e.proposals||[]),le("success"),we({title:"Smart Matches Found!",description:`Found ${e.matches_created||0} excellent advocates for your student.`})},onError:e=>{console.error("Auto-matching error:",e),le("error"),we({title:"Matching Error",description:"Unable to find matches right now. Please try again or contact support.",variant:"destructive"})}}),qe=$({mutationFn:async({studentId:e,advocateIds:s})=>{const a=await h("POST","/api/match/propose",{student_id:e,advocate_ids:s,manual_match:!0});return await a.json()},onSuccess:()=>{be.invalidateQueries({queryKey:["match-proposals"]}),we({title:"Match Request Sent!",description:"Your request has been sent to the advocate. They will review and respond soon."})},onError:()=>{we({title:"Error",description:"Failed to create match proposal. Please try again.",variant:"destructive"})}}),Le=e=>{fe(e),ve(""),pe(!0)},De=(e,s)=>{const a={specialization_match:Math.min(40,.4*e),experience_level:Math.min(30,.3*e),availability_fit:Math.min(20,.2*e),location_proximity:Math.min(10,.1*e)};return{total:e,breakdown:a,explanation:`Match score is calculated using: Specialization overlap (${a.specialization_match.toFixed(0)}%), Professional experience (${a.experience_level.toFixed(0)}%), Schedule availability (${a.availability_fit.toFixed(0)}%), and Location proximity (${a.location_proximity.toFixed(0)}%)`}},Ie=$({mutationFn:async e=>{const s=await h("POST",`/api/match/${e}/accept`);return await s.json()},onSuccess:()=>{be.invalidateQueries({queryKey:["match-proposals",_e]}),we({title:"Proposal Accepted",description:"You've accepted this match proposal. The family will be notified."})},onError:()=>{we({title:"Error",description:"Failed to accept proposal.",variant:"destructive"})}}),$e=$({mutationFn:async({proposalId:e,reason:s})=>{const a=await h("POST",`/api/match/${e}/decline`,{reason:s});return await a.json()},onSuccess:()=>{be.invalidateQueries({queryKey:["match-proposals",_e]}),we({title:"Proposal Declined",description:"You've declined this match proposal."})},onError:()=>{we({title:"Error",description:"Failed to decline proposal.",variant:"destructive"})}}),Ye=()=>{Z?(le("loading"),Te.mutate({student_id:Z,urgency_level:ee})):we({title:"Select a Student",description:"Please choose a student before finding advocate matches.",variant:"destructive"})};return Se?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 via-indigo-500/10 to-blue-500/10 rounded-2xl"}),e.jsxs("div",{className:"relative p-8 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg",children:e.jsx(Y,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Advocate Match Management"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Review incoming match proposals and connect with new families"})]})]}),e.jsx("div",{className:"grid gap-4",children:0===Ee.filter(e=>"pending"===e.status).length?e.jsx(i,{children:e.jsxs(l,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Y,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No New Proposals"}),e.jsx("p",{className:"text-gray-500 text-center max-w-md",children:"You don't have any new match proposals at the moment. New families will appear here when they're interested in working with you."})]})}):Ee.filter(e=>"pending"===e.status).map(s=>e.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[e.jsx(r,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(n,{className:"text-lg",children:["Match Request from ",s.student?.full_name,"'s Family"]}),e.jsxs(c,{children:[s.student?.grade_level," â€¢ ",s.student?.special_needs?.join(", ")||"Special Education Support"]})]}),e.jsxs(x,{variant:"secondary",children:[s.score,"% Match"]})]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.student?.special_needs?.map(s=>e.jsx(x,{variant:"outline",children:s},s))}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(d,{onClick:()=>Ie.mutate(s.id),disabled:Ie.isPending,className:"flex-1",children:"Accept Match"}),e.jsx(d,{variant:"outline",onClick:()=>$e.mutate({proposalId:s.id}),disabled:$e.isPending,className:"flex-1",children:"Decline"})]})]})]},s.id))})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 via-indigo-500/10 to-blue-500/10 rounded-2xl"}),e.jsxs("div",{className:"relative p-8 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg",children:e.jsx(O,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Find Your Perfect Advocate"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Smart AI matching and comprehensive advocate browsing - all in one powerful interface"})]})]}),e.jsxs(i,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[e.jsxs(r,{children:[e.jsx(n,{children:"Select Your Student"}),e.jsx(c,{children:"Choose which student needs advocacy support"})]}),e.jsx(l,{children:e.jsx("div",{className:"max-w-md",children:e.jsx(L,{selectedStudent:Z,onStudentChange:e=>{X(e);const s=ke.find(s=>s.id===e);xe(s||null)},placeholder:"Choose a student for advocacy support...",allowEmpty:!1,"data-testid":"student-selector"})})})]}),e.jsxs(w,{value:re,onValueChange:ne,className:"w-full",children:[e.jsxs(b,{className:"grid w-full grid-cols-3",children:[e.jsx(S,{value:"smart-match",children:"ðŸ¤– AI Smart Match"}),e.jsx(S,{value:"browse",children:"ðŸ” Browse All"}),e.jsx(S,{value:"proposals",children:"ðŸ“‹ My Proposals"})]}),e.jsx(_,{value:"smart-match",children:e.jsxs(i,{className:"border-0 shadow-lg",children:[e.jsxs(r,{children:[e.jsxs(n,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg shadow-md",children:e.jsx(R,{className:"h-5 w-5 text-white"})}),"Smart Matching Options"]}),e.jsx(c,{children:"Configure your matching preferences for the best results"})]}),e.jsxs(l,{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-xl p-6",children:e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"How urgent is your need?"}),e.jsxs(j,{value:ee,onValueChange:se,children:[e.jsx(v,{"data-testid":"urgency-selector",children:e.jsx(g,{})}),e.jsxs(f,{children:[e.jsx(N,{value:"low",children:"Low - Within a month"}),e.jsx(N,{value:"medium",children:"Medium - Within 2 weeks"}),e.jsx(N,{value:"high",children:"High - Urgent, ASAP"})]})]})]}),e.jsx(d,{onClick:Ye,disabled:!Z||Te.isPending,className:"w-full bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700",size:"lg","data-testid":"find-matches-button",children:Te.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Finding Perfect Matches..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Find My Matches"]})})]})}),"success"===ie&&ae.length>0&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold text-lg mb-2",children:"ðŸŽ¯ Your Top Matches"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ranked by compatibility with your student's needs"})]}),e.jsx("div",{className:"grid gap-4","data-testid":"match-results",children:ae.map((s,a)=>{const t=s.advocate,r=s.match_details||{total_score:85,reasons:["Compatible specialization"]};return e.jsx(i,{className:"border-2 border-purple-200 dark:border-purple-800",children:e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"h-10 w-10",children:e.jsx(p,{className:"bg-gradient-to-br from-purple-500 to-indigo-600 text-white",children:t.full_name?.split(" ").map(e=>e[0]).join("")||"A"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold",children:t.full_name||"Expert Advocate"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),t.location||"Available nationwide"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400 flex items-center gap-1",children:[r.total_score,"% Match",e.jsxs(k,{children:[e.jsx(C,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",children:e.jsx(H,{className:"h-3 w-3"})})}),e.jsxs(F,{children:[e.jsxs(A,{children:[e.jsx(M,{children:"Match Score Breakdown"}),e.jsx(P,{children:"Understanding how we calculate advocate compatibility"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Specialization Match"}),e.jsxs("span",{className:"font-medium",children:[De(r.total_score).breakdown.specialization_match.toFixed(0),"%"]})]}),e.jsx(y,{value:De(r.total_score).breakdown.specialization_match,className:"h-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Professional Experience"}),e.jsxs("span",{className:"font-medium",children:[De(r.total_score).breakdown.experience_level.toFixed(0),"%"]})]}),e.jsx(y,{value:De(r.total_score).breakdown.experience_level,className:"h-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Schedule Availability"}),e.jsxs("span",{className:"font-medium",children:[De(r.total_score).breakdown.availability_fit.toFixed(0),"%"]})]}),e.jsx(y,{value:De(r.total_score).breakdown.availability_fit,className:"h-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Location Proximity"}),e.jsxs("span",{className:"font-medium",children:[De(r.total_score).breakdown.location_proximity.toFixed(0),"%"]})]}),e.jsx(y,{value:De(r.total_score).breakdown.location_proximity,className:"h-2"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total Match Score"}),e.jsxs("span",{className:"text-purple-600",children:[r.total_score,"%"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:De(r.total_score).explanation})]})]})]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Compatibility"})]})]}),e.jsx(y,{value:r.total_score,className:"mb-3"}),e.jsx("div",{className:"space-y-2 mb-4",children:r.reasons?.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:s})]},a))}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.specializations?.slice(0,3).map(s=>e.jsx(x,{variant:"secondary",children:s},s))||e.jsx(x,{variant:"secondary",children:"IEP Expertise"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),t.rating||4.8]}),e.jsxs("span",{children:["$",t.rate_per_hour||125,"/hour"]})]}),e.jsxs(d,{size:"sm",className:"bg-purple-600 hover:bg-purple-700","data-testid":`contact-advocate-${a}`,onClick:()=>Le(t.id),children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Contact Advocate"]})]})]})},s.proposal?.id||a)})})]}),"success"===ie&&0===ae.length&&e.jsxs("div",{className:"mt-8 text-center py-8",children:[e.jsxs("div",{className:"text-muted-foreground mb-4",children:[e.jsx(B,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{children:"No matches found for your current criteria."}),e.jsx("p",{className:"text-sm",children:"Try adjusting your preferences or contact us for help."})]}),e.jsx(d,{variant:"outline",children:"Contact Support"})]}),"error"===ie&&e.jsxs("div",{className:"mt-8 text-center py-8",children:[e.jsxs("div",{className:"text-muted-foreground mb-4",children:[e.jsx(O,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{children:"Unable to connect to matching service."}),e.jsx("p",{className:"text-sm",children:"Please try again or browse advocates manually."})]}),e.jsx(d,{variant:"outline",onClick:Ye,disabled:!Z,children:"Try Again"})]})]})]})}),e.jsx(_,{value:"browse",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(n,{children:"Search & Filter Advocates"}),e.jsx(c,{children:"Find advocates based on your specific requirements"})]}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(m,{id:"search",placeholder:"Name, specialization, or keywords...",className:"pl-10",value:ce,onChange:e=>de(e.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"specialty",children:"Specialty"}),e.jsxs(j,{value:oe,onValueChange:me,children:[e.jsx(v,{children:e.jsx(g,{placeholder:"All specialties"})}),e.jsxs(f,{children:[e.jsx(N,{value:"all",children:"All Specialties"}),e.jsx(N,{value:"Autism Spectrum",children:"Autism Spectrum"}),e.jsx(N,{value:"ADHD",children:"ADHD"}),e.jsx(N,{value:"Learning Disabilities",children:"Learning Disabilities"}),e.jsx(N,{value:"Behavioral Support",children:"Behavioral Support"})]})]})]})]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-sm font-medium",children:[ze.length," advocate",1!==ze.length?"s":""," found"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ze.map(s=>e.jsx(i,{className:"hover:shadow-md transition-shadow",children:e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"h-10 w-10",children:e.jsx(p,{className:"bg-gradient-to-br from-purple-500 to-indigo-600 text-white",children:s.full_name.split(" ").map(e=>e[0]).join("")})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold",children:s.full_name}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),s.location||"Available nationwide"]})]})]})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.specializations?.slice(0,3).map(s=>e.jsx(x,{variant:"secondary",children:s},s))}),e.jsxs(z,{open:Ne.has(s.id),onOpenChange:()=>(e=>{const s=new Set(Ne);s.has(e)?s.delete(e):s.add(e),ye(s)})(s.id),children:[e.jsx(T,{asChild:!0,children:e.jsx(d,{variant:"ghost",className:"w-full mb-3 text-sm",children:Ne.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),"Hide Details"]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"Learn More"]})})}),e.jsxs(q,{className:"space-y-3 mb-4",children:[s.bio&&e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-sm mb-1",children:"About"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.bio})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-sm mb-1",children:"Experience"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.years_experience||"5+"," years in special education advocacy"]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-sm mb-1",children:"All Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.specializations?.map(s=>e.jsx(x,{variant:"outline",className:"text-xs",children:s},s))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.rating||4.8]}),e.jsxs("span",{children:["$",s.rate_per_hour||125,"/hour"]})]}),e.jsx(d,{size:"sm",onClick:()=>Le(s.id),disabled:!he||qe.isPending,children:"Contact"})]})]})},s.id))}),0===ze.length&&e.jsx(i,{children:e.jsxs(l,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Y,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Advocates Found"}),e.jsx("p",{className:"text-gray-500 text-center max-w-md",children:"Try adjusting your search criteria or check back later for new advocates."})]})})]})}),e.jsx(_,{value:"proposals",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"My Match Proposals"}),e.jsx(d,{onClick:()=>be.invalidateQueries({queryKey:["match-proposals"]}),variant:"outline",children:"Refresh"})]}),0===Ee.length?e.jsx(i,{children:e.jsxs(l,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Q,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Proposals Yet"}),e.jsx("p",{className:"text-gray-500 text-center max-w-md",children:"Your match proposals will appear here. Start by using AI matching or browsing advocates to send match requests."})]})}):e.jsx("div",{className:"grid gap-4",children:Ee.map(s=>e.jsxs(i,{className:"hover:shadow-md transition-shadow",children:[e.jsx(r,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[s.student?.full_name," Ã— ",s.advocate?.full_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Sent ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsx(x,{variant:"accepted"===s.status?"default":"declined"===s.status?"destructive":"intro_requested"===s.status?"secondary":"outline",children:s.status.replace("_"," ")})]})}),e.jsx(l,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:"secondary",children:[s.score,"% Match"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Compatibility Score"})]})})})]},s.id))})]})})]}),e.jsx(k,{open:ue,onOpenChange:pe,children:e.jsxs(F,{className:"sm:max-w-[500px]",children:[e.jsxs(A,{children:[e.jsx(M,{children:"Connect with Advocate"}),e.jsx(P,{children:"Share details about your needs to help the advocate understand how they can best support your student."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"contact-note",children:"Why are you interested in this advocate?"}),e.jsx(E,{id:"contact-note",placeholder:"Tell the advocate about your student's specific needs, any challenges you're facing, or what type of support you're looking for...",className:"min-h-[100px] mt-2",value:je,onChange:e=>ve(e.target.value)})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"This note will be shared with the advocate along with your match request."})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(d,{variant:"outline",onClick:()=>pe(!1),children:"Cancel"}),e.jsx(d,{onClick:()=>{ge&&((async e=>{he?qe.mutate({studentId:he.id,advocateIds:[e]}):we({title:"Error",description:"Please select a student first",variant:"destructive"})})(ge),pe(!1),fe(null),ve(""))},disabled:qe.isPending,children:qe.isPending?"Sending...":"Send Request"})]})]})})]})}export{J as default};
