var e,t,n,r,i,s,o,u,a,c,l,g,m,h,p,d,f,y,b,P,w,S,T,v,x,D,N,B,C,V,F,L,z,Q,q,I,$,j,A,O,U,E,_,k,J,K,R,G,M,H,W,X,Y,Z,ee,te,ne,re,ie,se,oe,ue,ae,ce,le,ge,me,he,pe,de,fe,ye,be,Pe,we,Se,Te,ve,xe,De,Ne,Be,Ce,Ve,Fe,Le,ze,Qe,qe,Ie,$e,je,Ae,Oe,Ue,Ee,_e,ke,Je,Ke,Re,Ge,Me,He,We,Xe,Ye,Ze,et,tt,nt,rt,it,st,ot,ut,at,ct,lt,gt,mt,ht,pt,dt,ft,yt,bt,Pt,wt,St,Tt,vt,xt,Dt,Nt,Bt,Ct,Vt,Ft,Lt,zt,Qt,qt,It,$t,jt,At,Ot,Ut,Et,_t,kt,Jt,Kt,Rt,Gt,Mt,Ht,Wt,Xt,Yt,Zt,en,tn,nn,rn,sn,on,un,an,cn,ln,gn,mn,hn,pn,dn,fn,yn,bn,Pn,wn,Sn,Tn,vn,xn,Dn,Nn,Bn,Cn,Vn,Fn,Ln,zn,Qn,qn,In,$n,jn,An,On,Un,En,_n,kn,Jn,Kn,Rn=Object.defineProperty,Gn=(e,t,n)=>((e,t,n)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const Mn=Symbol.for("drizzle:entityKind");function Hn(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,Mn))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(Mn in n&&n[Mn]===t[Mn])return!0;n=Object.getPrototypeOf(n)}return!1}e=Mn;class Wn{constructor(e,t){Gn(this,"name"),Gn(this,"keyAsName"),Gn(this,"primary"),Gn(this,"notNull"),Gn(this,"default"),Gn(this,"defaultFn"),Gn(this,"onUpdateFn"),Gn(this,"hasDefault"),Gn(this,"isUnique"),Gn(this,"uniqueName"),Gn(this,"uniqueType"),Gn(this,"dataType"),Gn(this,"columnType"),Gn(this,"enumValues"),Gn(this,"generated"),Gn(this,"generatedIdentity"),Gn(this,"config"),this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}Gn(Wn,e,"Column"),t=Mn;class Xn{constructor(e,t,n){Gn(this,"config"),Gn(this,"$default",this.$defaultFn),Gn(this,"$onUpdate",this.$onUpdateFn),this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}Gn(Xn,t,"ColumnBuilder");const Yn=Symbol.for("drizzle:Name");n=Mn;class Zn{constructor(e,t){Gn(this,"reference"),Gn(this,"_onUpdate","no action"),Gn(this,"_onDelete","no action"),this.reference=()=>{const{name:t,columns:n,foreignColumns:r}=e();return{name:t,columns:n,foreignTable:r[0].table,foreignColumns:r}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new er(e,this)}}Gn(Zn,n,"PgForeignKeyBuilder"),r=Mn;class er{constructor(e,t){Gn(this,"reference"),Gn(this,"onUpdate"),Gn(this,"onDelete"),this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:n}=this.reference(),r=t.map(e=>e.name),i=n.map(e=>e.name),s=[this.table[Yn],...r,n[0].table[Yn],...i];return e??`${s.join("_")}_fk`}}function tr(e,t,n){for(let r=t;r<e.length;r++){const i=e[r];if("\\"!==i){if('"'===i)return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(","===i||"}"===i))return[e.slice(t,r).replace(/\\/g,""),r]}else r++}return[e.slice(t).replace(/\\/g,""),e.length]}function nr(e,t=0){const n=[];let r=t,i=!1;for(;r<e.length;){const s=e[r];if(","===s){(i||r===t)&&n.push(""),i=!0,r++;continue}if(i=!1,"\\"===s){r+=2;continue}if('"'===s){const[t,i]=tr(e,r+1,!0);n.push(t),r=i;continue}if("}"===s)return[n,r+1];if("{"===s){const[t,i]=nr(e,r+1);n.push(t),r=i;continue}const[o,u]=tr(e,r,!1);n.push(o),r=u}return[n,r]}function rr(e){const[t]=nr(e,1);return t}function ir(e){return`{${e.map(e=>Array.isArray(e)?ir(e):"string"==typeof e?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}Gn(er,r,"PgForeignKey");class sr extends(s=Xn,i=Mn,s){constructor(){super(...arguments),Gn(this,"foreignKeyConfigs",[])}array(e){return new ar(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:r})=>function(e,...t){return e(...t)}((n,r)=>{const i=new Zn(()=>{const t=n();return{columns:[e],foreignColumns:[t]}});return r.onUpdate&&i.onUpdate(r.onUpdate),r.onDelete&&i.onDelete(r.onDelete),i.build(t)},n,r))}buildExtraConfigColumn(e){return new ur(e,this.config)}}Gn(sr,i,"PgColumnBuilder");class or extends(u=Wn,o=Mn,u){constructor(e,t){t.uniqueName||(t.uniqueName=function(e,t){return`${e[Yn]}_${t.join("_")}_unique`}(e,[t.name])),super(e,t),this.table=e}}Gn(or,o,"PgColumn");class ur extends(c=or,a=Mn,c){constructor(){super(...arguments),Gn(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass}),Gn(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}Gn(ur,a,"ExtraConfigColumn");class ar extends(g=sr,l=Mn,g){constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){const t=this.config.baseBuilder.build(e);return new lr(e,this.config,t)}}Gn(ar,l,"PgArrayBuilder");const cr=class e extends(h=or,m=Mn,h){constructor(e,t,n,r){super(e,t),Gn(this,"size"),this.baseColumn=n,this.range=r,this.size=t.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=rr(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(t,n=!1){const r=t.map(t=>null===t?null:Hn(this.baseColumn,e)?this.baseColumn.mapToDriverValue(t,!0):this.baseColumn.mapToDriverValue(t));return n?r:ir(r)}};Gn(cr,m,"PgArray");let lr=cr;const gr=Symbol.for("drizzle:isPgEnum");p=Mn;class mr{constructor(e,t,n,r=!1,i=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:r,usedTables:i}}}Gn(mr,p,"Subquery");const hr={startActiveSpan:(e,t)=>t()},pr=Symbol.for("drizzle:ViewBaseConfig"),dr=Symbol.for("drizzle:Schema"),fr=Symbol.for("drizzle:Columns"),yr=Symbol.for("drizzle:ExtraConfigColumns"),br=Symbol.for("drizzle:OriginalName"),Pr=Symbol.for("drizzle:BaseName"),wr=Symbol.for("drizzle:IsAlias"),Sr=Symbol.for("drizzle:ExtraConfigBuilder"),Tr=Symbol.for("drizzle:IsDrizzleTable");x=Mn,v=Yn,T=br,S=dr,w=fr,P=yr,b=Pr,y=wr,f=Tr,d=Sr;class vr{constructor(e,t,n){Gn(this,v),Gn(this,T),Gn(this,S),Gn(this,w),Gn(this,P),Gn(this,b),Gn(this,y,!1),Gn(this,f,!0),Gn(this,d),this[Yn]=this[br]=e,this[dr]=t,this[Pr]=n}}Gn(vr,x,"Table"),Gn(vr,"Symbol",{Name:Yn,Schema:dr,OriginalName:br,Columns:fr,ExtraConfigColumns:yr,BaseName:Pr,IsAlias:wr,ExtraConfigBuilder:Sr}),D=Mn;class xr{constructor(e){Gn(this,"value"),this.value=Array.isArray(e)?e:[e]}getSQL(){return new Nr([this])}}Gn(xr,D,"StringChunk"),N=Mn;const Dr=class e{constructor(e){Gn(this,"decoder",Cr),Gn(this,"shouldInlineParams",!1),Gn(this,"usedTables",[]),this.queryChunks=e;for(const t of e)if(Hn(t,vr)){const e=t[vr.Symbol.Schema];this.usedTables.push(void 0===e?t[vr.Symbol.Name]:e+"."+t[vr.Symbol.Name])}}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return hr.startActiveSpan("drizzle.buildSQL",t=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(t,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:s,escapeParam:o,prepareTyping:u,inlineParams:a,paramStartIndex:c}=r;return function(e){const t={sql:"",params:[]};for(const n of e)t.sql+=n.sql,t.params.push(...n.params),n.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...n.typings));return t}(t.map(t=>{if(Hn(t,xr))return{sql:t.value.join(""),params:[]};if(Hn(t,Br))return{sql:s(t.value),params:[]};if(void 0===t)return{sql:"",params:[]};if(Array.isArray(t)){const e=[new xr("(")];for(const[n,r]of t.entries())e.push(r),n<t.length-1&&e.push(new xr(", "));return e.push(new xr(")")),this.buildQueryFromSourceParams(e,r)}if(Hn(t,e))return this.buildQueryFromSourceParams(t.queryChunks,{...r,inlineParams:a||t.shouldInlineParams});if(Hn(t,vr)){const e=t[vr.Symbol.Schema],n=t[vr.Symbol.Name];return{sql:void 0===e||t[wr]?s(n):s(e)+"."+s(n),params:[]}}if(Hn(t,Wn)){const e=i.getColumnCasing(t);if("indexes"===n.invokeSource)return{sql:s(e),params:[]};const r=t.table[vr.Symbol.Schema];return{sql:t.table[wr]||void 0===r?s(t.table[vr.Symbol.Name])+"."+s(e):s(r)+"."+s(t.table[vr.Symbol.Name])+"."+s(e),params:[]}}if(Hn(t,Ir)){const e=t[pr].schema,n=t[pr].name;return{sql:void 0===e||t[pr].isAlias?s(n):s(e)+"."+s(n),params:[]}}if(Hn(t,Fr)){if(Hn(t.value,Qr))return{sql:o(c.value++,t),params:[t],typings:["none"]};const n=null===t.value?null:t.encoder.mapToDriverValue(t.value);if(Hn(n,e))return this.buildQueryFromSourceParams([n],r);if(a)return{sql:this.mapInlineParam(n,r),params:[]};let i=["none"];return u&&(i=[u(t.encoder)]),{sql:o(c.value++,n),params:[n],typings:i}}return Hn(t,Qr)?{sql:o(c.value++,t),params:[t],typings:["none"]}:Hn(t,e.Aliased)&&void 0!==t.fieldAlias?{sql:s(t.fieldAlias),params:[]}:Hn(t,mr)?t._.isWith?{sql:s(t._.alias),params:[]}:this.buildQueryFromSourceParams([new xr("("),t._.sql,new xr(") "),new Br(t._.alias)],r):(l=t)&&"function"==typeof l&&gr in l&&!0===l[gr]?t.schema?{sql:s(t.schema)+"."+s(t.enumName),params:[]}:{sql:s(t.enumName),params:[]}:null!=(g=t)&&"function"==typeof g.getSQL?t.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([t.getSQL()],r):this.buildQueryFromSourceParams([new xr("("),t.getSQL(),new xr(")")],r):a?{sql:this.mapInlineParam(t,r),params:[]}:{sql:o(c.value++,t),params:[t],typings:["none"]};var l,g}))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){const n=e.toString();return t("[object Object]"===n?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(t){return void 0===t?this:new e.Aliased(this,t)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};Gn(Dr,N,"SQL");let Nr=Dr;B=Mn;class Br{constructor(e){Gn(this,"brand"),this.value=e}getSQL(){return new Nr([this])}}Gn(Br,B,"Name");const Cr={mapFromDriverValue:e=>e},Vr={mapToDriverValue:e=>e};C=Mn;class Fr{constructor(e,t=Vr){Gn(this,"brand"),this.value=e,this.encoder=t}getSQL(){return new Nr([this])}}function Lr(e,...t){const n=[];(t.length>0||e.length>0&&""!==e[0])&&n.push(new xr(e[0]));for(const[r,i]of t.entries())n.push(i,new xr(e[r+1]));return new Nr(n)}var zr;Gn(Fr,C,"Param"),(zr=Lr||(Lr={})).empty=function(){return new Nr([])},zr.fromList=function(e){return new Nr(e)},zr.raw=function(e){return new Nr([new xr(e)])},zr.join=function(e,t){const n=[];for(const[r,i]of e.entries())r>0&&void 0!==t&&n.push(t),n.push(i);return new Nr(n)},zr.identifier=function(e){return new Br(e)},zr.placeholder=function(e){return new Qr(e)},zr.param=function(e,t){return new Fr(e,t)},(e=>{var t;t=Mn;const n=class e{constructor(e,t){Gn(this,"isSelectionField",!1),this.sql=e,this.fieldAlias=t}getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}};Gn(n,t,"SQL.Aliased");let r=n;e.Aliased=r})(Nr||(Nr={})),V=Mn;class Qr{constructor(e){this.name=e}getSQL(){return new Nr([this])}}Gn(Qr,V,"Placeholder");const qr=Symbol.for("drizzle:IsDrizzleView");z=Mn,L=pr,F=qr;class Ir{constructor({name:e,schema:t,selectedFields:n,query:r}){Gn(this,L),Gn(this,F,!0),this[pr]={name:e,originalName:e,schema:t,selectedFields:n,query:r,isExisting:!r,isAlias:!1}}getSQL(){return new Nr([this])}}function $r(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}Gn(Ir,z,"View"),Wn.prototype.getSQL=function(){return new Nr([this])},vr.prototype.getSQL=function(){return new Nr([this])},mr.prototype.getSQL=function(){return new Nr([this])},"undefined"!=typeof TextDecoder&&new TextDecoder;class jr extends(q=sr,Q=Mn,q){generatedAlwaysAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}Gn(jr,Q,"PgIntColumnBaseBuilder");class Ar extends($=jr,I=Mn,$){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Or(e,this.config)}}Gn(Ar,I,"PgBigInt53Builder");class Or extends(A=or,j=Mn,A){getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}Gn(Or,j,"PgBigInt53");class Ur extends(U=jr,O=Mn,U){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Er(e,this.config)}}Gn(Ur,O,"PgBigInt64Builder");class Er extends(_=or,E=Mn,_){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function _r(e,t){const{name:n,config:r}=$r(e,t);return"number"===r.mode?new Ar(n):new Ur(n)}Gn(Er,E,"PgBigInt64");class kr extends(J=sr,k=Mn,J){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Jr(e,this.config)}}Gn(kr,k,"PgBigSerial53Builder");class Jr extends(R=or,K=Mn,R){getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}Gn(Jr,K,"PgBigSerial53");class Kr extends(M=sr,G=Mn,M){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Rr(e,this.config)}}Gn(Kr,G,"PgBigSerial64Builder");class Rr extends(W=or,H=Mn,W){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function Gr(e,t){const{name:n,config:r}=$r(e,t);return"number"===r.mode?new kr(n):new Kr(n)}Gn(Rr,H,"PgBigSerial64");class Mr extends(Y=sr,X=Mn,Y){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Hr(e,this.config)}}Gn(Mr,X,"PgBooleanBuilder");class Hr extends(ee=or,Z=Mn,ee){getSQLType(){return"boolean"}}function Wr(e){return new Mr(e??"")}Gn(Hr,Z,"PgBoolean");class Xr extends(ne=sr,te=Mn,ne){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Yr(e,this.config)}}Gn(Xr,te,"PgCharBuilder");class Yr extends(ie=or,re=Mn,ie){constructor(){super(...arguments),Gn(this,"length",this.config.length),Gn(this,"enumValues",this.config.enumValues)}getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function Zr(e,t={}){const{name:n,config:r}=$r(e,t);return new Xr(n,r)}Gn(Yr,re,"PgChar");class ei extends(oe=sr,se=Mn,oe){constructor(e){super(e,"string","PgCidr")}build(e){return new ti(e,this.config)}}Gn(ei,se,"PgCidrBuilder");class ti extends(ae=or,ue=Mn,ae){getSQLType(){return"cidr"}}function ni(e){return new ei(e??"")}Gn(ti,ue,"PgCidr");class ri extends(le=sr,ce=Mn,le){constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new ii(e,this.config)}}Gn(ri,ce,"PgCustomColumnBuilder");class ii extends(me=or,ge=Mn,me){constructor(e,t){super(e,t),Gn(this,"sqlName"),Gn(this,"mapTo"),Gn(this,"mapFrom"),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function si(e){return(t,n)=>{const{name:r,config:i}=$r(t,n);return new ri(r,i,e)}}Gn(ii,ge,"PgCustomColumn");class oi extends(pe=sr,he=Mn,pe){defaultNow(){return this.default(Lr`now()`)}}Gn(oi,he,"PgDateColumnBaseBuilder");class ui extends(fe=oi,de=Mn,fe){constructor(e){super(e,"date","PgDate")}build(e){return new ai(e,this.config)}}Gn(ui,de,"PgDateBuilder");class ai extends(be=or,ye=Mn,be){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}Gn(ai,ye,"PgDate");class ci extends(we=oi,Pe=Mn,we){constructor(e){super(e,"string","PgDateString")}build(e){return new li(e,this.config)}}Gn(ci,Pe,"PgDateStringBuilder");class li extends(Te=or,Se=Mn,Te){getSQLType(){return"date"}}function gi(e,t){const{name:n,config:r}=$r(e,t);return"date"===r?.mode?new ui(n):new ci(n)}Gn(li,Se,"PgDateString");class mi extends(xe=sr,ve=Mn,xe){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new hi(e,this.config)}}Gn(mi,ve,"PgDoublePrecisionBuilder");class hi extends(Ne=or,De=Mn,Ne){getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function pi(e){return new mi(e??"")}Gn(hi,De,"PgDoublePrecision");class di extends(Ce=sr,Be=Mn,Ce){constructor(e){super(e,"string","PgInet")}build(e){return new fi(e,this.config)}}Gn(di,Be,"PgInetBuilder");class fi extends(Fe=or,Ve=Mn,Fe){getSQLType(){return"inet"}}function yi(e){return new di(e??"")}Gn(fi,Ve,"PgInet");class bi extends(ze=jr,Le=Mn,ze){constructor(e){super(e,"number","PgInteger")}build(e){return new Pi(e,this.config)}}Gn(bi,Le,"PgIntegerBuilder");class Pi extends(qe=or,Qe=Mn,qe){getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function wi(e){return new bi(e??"")}Gn(Pi,Qe,"PgInteger");class Si extends($e=sr,Ie=Mn,$e){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new Ti(e,this.config)}}Gn(Si,Ie,"PgIntervalBuilder");class Ti extends(Ae=or,je=Mn,Ae){constructor(){super(...arguments),Gn(this,"fields",this.config.intervalConfig.fields),Gn(this,"precision",this.config.intervalConfig.precision)}getSQLType(){return`interval${this.fields?` ${this.fields}`:""}${this.precision?`(${this.precision})`:""}`}}function vi(e,t={}){const{name:n,config:r}=$r(e,t);return new Si(n,r)}Gn(Ti,je,"PgInterval");class xi extends(Ue=sr,Oe=Mn,Ue){constructor(e){super(e,"json","PgJson")}build(e){return new Di(e,this.config)}}Gn(xi,Oe,"PgJsonBuilder");class Di extends(_e=or,Ee=Mn,_e){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}}function Ni(e){return new xi(e??"")}Gn(Di,Ee,"PgJson");class Bi extends(Je=sr,ke=Mn,Je){constructor(e){super(e,"json","PgJsonb")}build(e){return new Ci(e,this.config)}}Gn(Bi,ke,"PgJsonbBuilder");class Ci extends(Re=or,Ke=Mn,Re){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return e}return e}}function Vi(e){return new Bi(e??"")}Gn(Ci,Ke,"PgJsonb");class Fi extends(Me=sr,Ge=Mn,Me){constructor(e){super(e,"array","PgLine")}build(e){return new Li(e,this.config)}}Gn(Fi,Ge,"PgLineBuilder");class Li extends(We=or,He=Mn,We){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(r)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}Gn(Li,He,"PgLine");class zi extends(Ye=sr,Xe=Mn,Ye){constructor(e){super(e,"json","PgLineABC")}build(e){return new Qi(e,this.config)}}Gn(zi,Xe,"PgLineABCBuilder");class Qi extends(et=or,Ze=Mn,et){getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,r]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(r)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function qi(e,t){const{name:n,config:r}=$r(e,t);return r?.mode&&"tuple"!==r.mode?new zi(n):new Fi(n)}Gn(Qi,Ze,"PgLineABC");class Ii extends(nt=sr,tt=Mn,nt){constructor(e){super(e,"string","PgMacaddr")}build(e){return new $i(e,this.config)}}Gn(Ii,tt,"PgMacaddrBuilder");class $i extends(it=or,rt=Mn,it){getSQLType(){return"macaddr"}}function ji(e){return new Ii(e??"")}Gn($i,rt,"PgMacaddr");class Ai extends(ot=sr,st=Mn,ot){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Oi(e,this.config)}}Gn(Ai,st,"PgMacaddr8Builder");class Oi extends(at=or,ut=Mn,at){getSQLType(){return"macaddr8"}}function Ui(e){return new Ai(e??"")}Gn(Oi,ut,"PgMacaddr8");class Ei extends(lt=sr,ct=Mn,lt){constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new _i(e,this.config)}}Gn(Ei,ct,"PgNumericBuilder");class _i extends(mt=or,gt=Mn,mt){constructor(e,t){super(e,t),Gn(this,"precision"),Gn(this,"scale"),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}Gn(_i,gt,"PgNumeric");class ki extends(pt=sr,ht=Mn,pt){constructor(e,t,n){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=n}build(e){return new Ji(e,this.config)}}Gn(ki,ht,"PgNumericNumberBuilder");class Ji extends(ft=or,dt=Mn,ft){constructor(e,t){super(e,t),Gn(this,"precision"),Gn(this,"scale"),Gn(this,"mapToDriverValue",String),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}Gn(Ji,dt,"PgNumericNumber");class Ki extends(bt=sr,yt=Mn,bt){constructor(e,t,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=n}build(e){return new Ri(e,this.config)}}Gn(Ki,yt,"PgNumericBigIntBuilder");class Ri extends(wt=or,Pt=Mn,wt){constructor(e,t){super(e,t),Gn(this,"precision"),Gn(this,"scale"),Gn(this,"mapFromDriverValue",BigInt),Gn(this,"mapToDriverValue",String),this.precision=t.precision,this.scale=t.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function Gi(e,t){const{name:n,config:r}=$r(e,t),i=r?.mode;return"number"===i?new ki(n,r?.precision,r?.scale):"bigint"===i?new Ki(n,r?.precision,r?.scale):new Ei(n,r?.precision,r?.scale)}Gn(Ri,Pt,"PgNumericBigInt");class Mi extends(Tt=sr,St=Mn,Tt){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Hi(e,this.config)}}Gn(Mi,St,"PgPointTupleBuilder");class Hi extends(xt=or,vt=Mn,xt){getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){const[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}Gn(Hi,vt,"PgPointTuple");class Wi extends(Nt=sr,Dt=Mn,Nt){constructor(e){super(e,"json","PgPointObject")}build(e){return new Xi(e,this.config)}}Gn(Wi,Dt,"PgPointObjectBuilder");class Xi extends(Ct=or,Bt=Mn,Ct){getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){const[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function Yi(e,t){const{name:n,config:r}=$r(e,t);return r?.mode&&"tuple"!==r.mode?new Wi(n):new Mi(n)}function Zi(e,t){const n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,e[t+i]);return r.getFloat64(0,!0)}function es(e){const t=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}(e);let n=0;const r=t[n];n+=1;const i=new DataView(t.buffer),s=i.getUint32(n,1===r);if(n+=4,536870912&s&&(i.getUint32(n,1===r),n+=4),1==(65535&s)){const e=Zi(t,n);n+=8;const r=Zi(t,n);return n+=8,[e,r]}throw new Error("Unsupported geometry type")}Gn(Xi,Bt,"PgPointObject");class ts extends(Ft=sr,Vt=Mn,Ft){constructor(e){super(e,"array","PgGeometry")}build(e){return new ns(e,this.config)}}Gn(ts,Vt,"PgGeometryBuilder");class ns extends(zt=or,Lt=Mn,zt){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return es(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}Gn(ns,Lt,"PgGeometry");class rs extends(qt=sr,Qt=Mn,qt){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new is(e,this.config)}}Gn(rs,Qt,"PgGeometryObjectBuilder");class is extends($t=or,It=Mn,$t){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=es(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function ss(e,t){const{name:n,config:r}=$r(e,t);return r?.mode&&"tuple"!==r.mode?new rs(n):new ts(n)}Gn(is,It,"PgGeometryObject");class os extends(At=sr,jt=Mn,At){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new us(e,this.config)}}Gn(os,jt,"PgRealBuilder");class us extends(Ut=or,Ot=Mn,Ut){constructor(e,t){super(e,t),Gn(this,"mapFromDriverValue",e=>"string"==typeof e?Number.parseFloat(e):e)}getSQLType(){return"real"}}function as(e){return new os(e??"")}Gn(us,Ot,"PgReal");class cs extends(_t=sr,Et=Mn,_t){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ls(e,this.config)}}Gn(cs,Et,"PgSerialBuilder");class ls extends(Jt=or,kt=Mn,Jt){getSQLType(){return"serial"}}function gs(e){return new cs(e??"")}Gn(ls,kt,"PgSerial");class ms extends(Rt=jr,Kt=Mn,Rt){constructor(e){super(e,"number","PgSmallInt")}build(e){return new hs(e,this.config)}}Gn(ms,Kt,"PgSmallIntBuilder");class hs extends(Mt=or,Gt=Mn,Mt){constructor(){super(...arguments),Gn(this,"mapFromDriverValue",e=>"string"==typeof e?Number(e):e)}getSQLType(){return"smallint"}}function ps(e){return new ms(e??"")}Gn(hs,Gt,"PgSmallInt");class ds extends(Wt=sr,Ht=Mn,Wt){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new fs(e,this.config)}}Gn(ds,Ht,"PgSmallSerialBuilder");class fs extends(Yt=or,Xt=Mn,Yt){getSQLType(){return"smallserial"}}function ys(e){return new ds(e??"")}Gn(fs,Xt,"PgSmallSerial");class bs extends(en=sr,Zt=Mn,en){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Ps(e,this.config)}}Gn(bs,Zt,"PgTextBuilder");class Ps extends(nn=or,tn=Mn,nn){constructor(){super(...arguments),Gn(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}function ws(e,t={}){const{name:n,config:r}=$r(e,t);return new bs(n,r)}Gn(Ps,tn,"PgText");class Ss extends(sn=oi,rn=Mn,sn){constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}build(e){return new Ts(e,this.config)}}Gn(Ss,rn,"PgTimeBuilder");class Ts extends(un=or,on=Mn,un){constructor(e,t){super(e,t),Gn(this,"withTimezone"),Gn(this,"precision"),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function vs(e,t={}){const{name:n,config:r}=$r(e,t);return new Ss(n,r.withTimezone??!1,r.precision)}Gn(Ts,on,"PgTime");class xs extends(cn=oi,an=Mn,cn){constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new Ds(e,this.config)}}Gn(xs,an,"PgTimestampBuilder");class Ds extends(gn=or,ln=Mn,gn){constructor(e,t){super(e,t),Gn(this,"withTimezone"),Gn(this,"precision"),Gn(this,"mapFromDriverValue",e=>new Date(this.withTimezone?e:e+"+0000")),Gn(this,"mapToDriverValue",e=>e.toISOString()),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${void 0===this.precision?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}Gn(Ds,ln,"PgTimestamp");class Ns extends(hn=oi,mn=Mn,hn){constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new Bs(e,this.config)}}Gn(Ns,mn,"PgTimestampStringBuilder");class Bs extends(dn=or,pn=Mn,dn){constructor(e,t){super(e,t),Gn(this,"withTimezone"),Gn(this,"precision"),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Cs(e,t={}){const{name:n,config:r}=$r(e,t);return"string"===r?.mode?new Ns(n,r.withTimezone??!1,r.precision):new xs(n,r?.withTimezone??!1,r?.precision)}Gn(Bs,pn,"PgTimestampString");class Vs extends(yn=sr,fn=Mn,yn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Lr`gen_random_uuid()`)}build(e){return new Fs(e,this.config)}}Gn(Vs,fn,"PgUUIDBuilder");class Fs extends(Pn=or,bn=Mn,Pn){getSQLType(){return"uuid"}}function Ls(e){return new Vs(e??"")}Gn(Fs,bn,"PgUUID");class zs extends(Sn=sr,wn=Mn,Sn){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Qs(e,this.config)}}Gn(zs,wn,"PgVarcharBuilder");class Qs extends(vn=or,Tn=Mn,vn){constructor(){super(...arguments),Gn(this,"length",this.config.length),Gn(this,"enumValues",this.config.enumValues)}getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function qs(e,t={}){const{name:n,config:r}=$r(e,t);return new zs(n,r)}Gn(Qs,Tn,"PgVarchar");class Is extends(Dn=sr,xn=Mn,Dn){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new $s(e,this.config)}}Gn(Is,xn,"PgBinaryVectorBuilder");class $s extends(Bn=or,Nn=Mn,Bn){constructor(){super(...arguments),Gn(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}function js(e,t){const{name:n,config:r}=$r(e,t);return new Is(n,r)}Gn($s,Nn,"PgBinaryVector");class As extends(Vn=sr,Cn=Mn,Vn){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new Os(e,this.config)}}Gn(As,Cn,"PgHalfVectorBuilder");class Os extends(Ln=or,Fn=Mn,Ln){constructor(){super(...arguments),Gn(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function Us(e,t){const{name:n,config:r}=$r(e,t);return new As(n,r)}Gn(Os,Fn,"PgHalfVector");class Es extends(Qn=sr,zn=Mn,Qn){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new _s(e,this.config)}}Gn(Es,zn,"PgSparseVectorBuilder");class _s extends(In=or,qn=Mn,In){constructor(){super(...arguments),Gn(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}function ks(e,t){const{name:n,config:r}=$r(e,t);return new Es(n,r)}Gn(_s,qn,"PgSparseVector");class Js extends(jn=sr,$n=Mn,jn){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new Ks(e,this.config)}}Gn(Js,$n,"PgVectorBuilder");class Ks extends(On=or,An=Mn,On){constructor(){super(...arguments),Gn(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function Rs(e,t){const{name:n,config:r}=$r(e,t);return new Js(n,r)}Gn(Ks,An,"PgVector");const Gs=Symbol.for("drizzle:PgInlineForeignKeys"),Ms=Symbol.for("drizzle:EnableRLS");class Hs extends(Kn=vr,Jn=Mn,kn=Gs,_n=Ms,En=vr.Symbol.ExtraConfigBuilder,Un=vr.Symbol.ExtraConfigColumns,Kn){constructor(){super(...arguments),Gn(this,kn,[]),Gn(this,_n,!1),Gn(this,En),Gn(this,Un,{})}}function Ws(e,t,n,r,i=e){const s=new Hs(e,r,i),o="function"==typeof t?t({bigint:_r,bigserial:Gr,boolean:Wr,char:Zr,cidr:ni,customType:si,date:gi,doublePrecision:pi,inet:yi,integer:wi,interval:vi,json:Ni,jsonb:Vi,line:qi,macaddr:ji,macaddr8:Ui,numeric:Gi,point:Yi,geometry:ss,real:as,serial:gs,smallint:ps,smallserial:ys,text:ws,time:vs,timestamp:Cs,uuid:Ls,varchar:qs,bit:js,halfvec:Us,sparsevec:ks,vector:Rs}):t,u=Object.fromEntries(Object.entries(o).map(([e,t])=>{const n=t;n.setName(e);const r=n.build(s);return s[Gs].push(...n.buildForeignKeys(r,s)),[e,r]})),a=Object.fromEntries(Object.entries(o).map(([e,t])=>{const n=t;n.setName(e);return[e,n.buildExtraConfigColumn(s)]})),c=Object.assign(s,u);return c[vr.Symbol.Columns]=u,c[vr.Symbol.ExtraConfigColumns]=a,Object.assign(c,{enableRLS:()=>(c[Hs.Symbol.EnableRLS]=!0,c)})}Gn(Hs,Jn,"PgTable"),Gn(Hs,"Symbol",Object.assign({},vr.Symbol,{InlineForeignKeys:Gs,EnableRLS:Ms}));const Xs=(e,t,n)=>Ws(e,t,0,void 0);export{ws as a,Wr as b,gs as c,wi as i,Ni as j,Xs as p,Lr as s,Cs as t,qs as v};
