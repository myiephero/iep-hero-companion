import{H as e}from"../assets/index-BuUqvl4a.js";class t{async request(t,s={}){try{const r=localStorage.getItem("authToken"),n={"Content-Type":"application/json",...s.headers||{}};r&&(n.Authorization=`Bearer ${r}`);const a=`${e()}${t}`;console.log("ðŸ”— API Client - Making request to:",a);const o=await fetch(a,{credentials:"include",headers:n,...s});if(!o.ok){if(401===o.status){console.log("ðŸš« API call failed with 401 - clearing expired token"),localStorage.removeItem("authToken");const e=window.location.pathname;["/parent/pricing","/advocate/pricing","/","/auth","/login"].some(t=>e===t||e.includes(t))||window.location.replace("/m/auth")}throw new Error(`API error: ${o.statusText}`)}return o.json()}catch(r){throw console.error(`API call failed for ${t}:`,r),r}}async getStudents(){return this.request("/students")}async createStudent(e){return this.request("/students",{method:"POST",body:JSON.stringify(e)})}async getAutismAccommodations(){return this.request("/autism_accommodations")}async createAutismAccommodation(e){return this.request("/autism_accommodations",{method:"POST",body:JSON.stringify(e)})}async getDocuments(){return this.request("/documents")}async createDocument(e){return this.request("/documents",{method:"POST",body:JSON.stringify(e)})}async updateDocument(e,t){return this.request(`/documents/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteDocument(e){return this.request(`/documents/${e}`,{method:"DELETE"})}async getAIReviews(e){const t=e?`/ai_reviews?document_id=${e}`:"/ai_reviews";return this.request(t)}async createAIReview(e){return this.request("/ai_reviews",{method:"POST",body:JSON.stringify(e)})}async getMatchProposals(){return(await this.request("/match")).proposals||[]}async getAdvocateProposals(){return(await this.request("/match/advocate")).proposals||[]}async createMatchProposal(e,t,s){return this.request("/match/propose",{method:"POST",body:JSON.stringify({student_id:e,advocate_ids:t,reason:s})})}async requestIntroCall(e,t,s){return this.request(`/match/${e}/intro`,{method:"POST",body:JSON.stringify({when_ts:t?.toISOString(),notes:s})})}async acceptProposal(e){return this.request(`/match/${e}/accept`,{method:"POST"})}async declineProposal(e,t){return this.request(`/match/${e}/decline`,{method:"POST",body:JSON.stringify({reason:t})})}async deleteAIReview(e){return this.request(`/ai_reviews/${e}`,{method:"DELETE"})}async getGoals(){return this.request("/goals")}async createGoal(e){return this.request("/goals",{method:"POST",body:JSON.stringify(e)})}async updateGoal(e,t){return this.request(`/goals/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async getMeetings(){return this.request("/meetings")}async createMeeting(e){return this.request("/meetings",{method:"POST",body:JSON.stringify(e)})}async getAdvocates(){return this.request("/advocates")}async createAdvocate(e){return this.request("/advocates",{method:"POST",body:JSON.stringify(e)})}async processDocument(e){return this.request("/process-document",{method:"POST",body:JSON.stringify(e)})}async analyzeDocument(e,t){return this.request("/analyze-document",{method:"POST",body:JSON.stringify({documentText:e,analysisType:t})})}async ingestIEP(e){return this.request("/iep-ingest",{method:"POST",body:JSON.stringify({docId:e})})}async analyzeIEP(e,t,s){return this.request("/iep-analyze",{method:"POST",body:JSON.stringify({docId:e,kind:t,studentContext:s})})}async createActionDraft(e,t,s){return this.request("/iep-action-draft",{method:"POST",body:JSON.stringify({analysisId:e,templateType:t,userInputs:s})})}async inviteParent(e,t,s){return this.request("/invite-parent",{method:"POST",body:JSON.stringify({email:e,firstName:t,lastName:s})})}}const s=new t;export{t as A,s as a};
