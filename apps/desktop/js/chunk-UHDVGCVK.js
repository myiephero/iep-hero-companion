import{j as t}from"./chunk-DsWtD-um.js";import{r as e}from"./chunk--CdJ9rTh.js";import{c as a,B as s}from"../assets/index-DhCC2x2k.js";import{au as r,av as n}from"./chunk-CIO6T0Sb.js";function c({text:c,maxLength:o=200,expandText:l="Read more",collapseText:i="Read less",className:d,preserveFormatting:m=!0,showButtonIcon:u=!0,buttonClassName:x,contentClassName:h,truncateStrategy:p="characters",testId:f}){const[g,j]=e.useState(!1),{shouldTruncate:N,truncatedText:T,fullText:v}=e.useMemo(()=>{if(!c||0===c.length)return{shouldTruncate:!1,truncatedText:c,fullText:c};let t,e;if("words"===p){const a=c.split(/\s+/);t=a.length>o,e=t?a.slice(0,o).join(" ")+"...":c}else t=c.length>o,e=t?c.slice(0,o).trimEnd()+"...":c;return{shouldTruncate:t,truncatedText:e,fullText:c}},[c,o,p]),w=e.useCallback(()=>{j(t=>!t)},[]);if(!N)return t.jsx("div",{className:a(d),"data-testid":f?`${f}-content`:void 0,children:t.jsx("div",{className:a(m&&"whitespace-pre-wrap",h),children:c})});const y=g?v:T;return t.jsxs("div",{className:a(d),"data-testid":f,children:[t.jsx("div",{className:a("transition-all duration-300 ease-in-out",m&&"whitespace-pre-wrap",h),"data-testid":f?`${f}-content`:void 0,children:y}),t.jsx(s,{variant:"ghost",size:"sm",onClick:w,className:a("mt-2 p-0 h-auto font-normal text-primary hover:text-primary/80 transition-colors",x),"aria-expanded":g,"aria-label":g?`${i} content`:`${l} content`,"data-testid":f?`${f}-toggle`:void 0,children:t.jsxs("span",{className:"flex items-center gap-1",children:[g?i:l,u&&t.jsx("span",{className:"transition-transform duration-200",children:g?t.jsx(r,{className:"h-3 w-3"}):t.jsx(n,{className:"h-3 w-3"})})]})})]})}function o(t="standard"){return e.useMemo(()=>{switch(t){case"compact":return{maxLength:150,truncateStrategy:"characters",preserveFormatting:!1};case"detailed":return{maxLength:500,truncateStrategy:"characters",preserveFormatting:!0};default:return{maxLength:200,truncateStrategy:"characters",preserveFormatting:!0}}},[t])}function l({text:e,className:s,testId:r="ai-analysis-read-more"}){const n=o("detailed");return t.jsx(c,{text:e,...n,className:a("text-muted-foreground",s),expandText:"Show full analysis",collapseText:"Show summary",testId:r})}function i({text:e,className:s,testId:r="recommendation-read-more"}){const n=o("standard");return t.jsx(c,{text:e,...n,className:a("text-muted-foreground",s),expandText:"Read full recommendation",collapseText:"Show less",testId:r})}export{l as A,c as R,i as a};
